/*! For license information please see 630.85f136a8af4b68c7cf19.js.LICENSE.txt */
"use strict";(self.webpackChunkjupyter_leaflet=self.webpackChunkjupyter_leaflet||[]).push([[630],{2630:(t,e,i)=>{i.r(e),i.d(e,{CenteredSymbolizer:()=>qe,CenteredTextSymbolizer:()=>Ze,CircleSymbolizer:()=>Ie,FlexSymbolizer:()=>Ue,Font:()=>Ci,GeomType:()=>le,GroupSymbolizer:()=>Oe,IconSymbolizer:()=>$e,Index:()=>fi,Justify:()=>Le,Labeler:()=>ui,Labelers:()=>di,LineLabelPlacement:()=>Je,LineLabelSymbolizer:()=>Ge,LineSymbolizer:()=>Ee,OffsetSymbolizer:()=>Ke,OffsetTextSymbolizer:()=>He,PMTiles:()=>ae,Padding:()=>We,PmtilesSource:()=>ue,PolygonLabelSymbolizer:()=>Qe,PolygonSymbolizer:()=>Se,Sheet:()=>Ti,ShieldSymbolizer:()=>Ae,Static:()=>ki,TextPlacements:()=>Fe,TextSymbolizer:()=>Ne,TileCache:()=>Me,Toner:()=>Ei,View:()=>li,ZxySource:()=>de,arr:()=>Te,covering:()=>ci,createPattern:()=>Ce,cubicBezier:()=>Ve,dark:()=>S,exp:()=>Ye,filterFn:()=>Di,getFont:()=>ji,getZoom:()=>zi,isCCW:()=>ve,isInRing:()=>be,json_style:()=>Vi,labelRules:()=>ii,leafletLayer:()=>Fi,light:()=>T,linear:()=>je,numberFn:()=>Xi,numberOrFn:()=>Yi,paintRules:()=>ei,painter:()=>mi,pointInPolygon:()=>_e,pointMinDistToLines:()=>ke,pointMinDistToPoints:()=>ze,sourcesToViews:()=>hi,step:()=>Pe,toIndex:()=>he,transformGeom:()=>oi,widthFn:()=>Pi,wrap:()=>ai});var r=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,f=Math.pow,u=(t,e,i)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,d=(t,e)=>function(){return e||(0,t[o(t)[0]])((e={exports:{}}).exports,e),e.exports},p=(t,e,i)=>(i=null!=t?r(l(t)):{},((t,e,i,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of o(e))h.call(t,i)||undefined===i||n(t,i,{get:()=>e[i],enumerable:!(r=s(e,i))||r.enumerable});return t})(!e&&t&&t.__esModule?i:n(i,"default",{value:t,enumerable:!0}),t)),m=(t,e,i)=>new Promise(((r,n)=>{var s=t=>{try{a(i.next(t))}catch(t){n(t)}},o=t=>{try{a(i.throw(t))}catch(t){n(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(s,o);a((i=i.apply(t,e)).next())})),y=d({"node_modules/@mapbox/point-geometry/index.js"(t,e){function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,n=i*this.x+e*this.y;return this.x=r,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.x+i*(this.x-e.x)-r*(this.y-e.y),s=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=n,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}}}),g=d({"node_modules/@mapbox/unitbezier/index.js"(t,e){function i(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}e.exports=i,i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var i,r,n,s,o;for(void 0===e&&(e=1e-6),n=t,o=0;o<8;o++){if(s=this.sampleCurveX(n)-t,Math.abs(s)<e)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=s/a}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(s=this.sampleCurveX(n),Math.abs(s-t)<e)return n;t>s?i=n:r=n,n=.5*(r-i)+i}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}}),x=d({"node_modules/tinyqueue/tinyqueue.js"(t,e){var r,n;r=t,n=function(){var t=function(t,i){if(void 0===t&&(t=[]),void 0===i&&(i=e),this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function e(t,e){return t<e?-1:t>e?1:0}return t.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},t.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},t.prototype.peek=function(){return this.data[0]},t.prototype._up=function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,s=e[n];if(i(r,s)>=0)break;e[t]=s,t=n}e[t]=r},t.prototype._down=function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var s=1+(t<<1),o=e[s],a=s+1;if(a<this.length&&i(e[a],o)<0&&(s=a,o=e[a]),i(o,n)>=0)break;e[t]=o,t=s}e[t]=n},t},"object"==typeof t&&void 0!==e?e.exports=n():"function"==typeof define&&i.amdO?define(n):(r=r||self).TinyQueue=n()}}),w=d({"node_modules/polylabel/polylabel.js"(t,e){var i=x();function r(t,e,r){var o,a,l,h;e=e||1;for(var c=0;c<t[0].length;c++){var f=t[0][c];(!c||f[0]<o)&&(o=f[0]),(!c||f[1]<a)&&(a=f[1]),(!c||f[0]>l)&&(l=f[0]),(!c||f[1]>h)&&(h=f[1])}var u=l-o,d=h-a,p=Math.min(u,d),m=p/2;if(0===p){var y=[o,a];return y.distance=0,y}for(var g=new i(void 0,n),x=o;x<l;x+=p)for(var w=a;w<h;w+=p)g.push(new s(x+m,w+m,m,t));var b=function(t){for(var e=0,i=0,r=0,n=t[0],o=0,a=n.length,l=a-1;o<a;l=o++){var h=n[o],c=n[l],f=h[0]*c[1]-c[0]*h[1];i+=(h[0]+c[0])*f,r+=(h[1]+c[1])*f,e+=3*f}return 0===e?new s(n[0][0],n[0][1],0,t):new s(i/e,r/e,0,t)}(t),v=new s(o+u/2,a+d/2,0,t);v.d>b.d&&(b=v);for(var _=g.length;g.length;){var z=g.pop();z.d>b.d&&(b=z,r&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,_)),z.max-b.d<=e||(m=z.h/2,g.push(new s(z.x-m,z.y-m,m,t)),g.push(new s(z.x+m,z.y-m,m,t)),g.push(new s(z.x-m,z.y+m,m,t)),g.push(new s(z.x+m,z.y+m,m,t)),_+=4)}r&&(console.log("num probes: "+_),console.log("best distance: "+b.d));var k=[b.x,b.y];return k.distance=b.d,k}function n(t,e){return e.max-t.max}function s(t,e,i,r){this.x=t,this.y=e,this.h=i,this.d=function(t,e,i){for(var r=!1,n=1/0,s=0;s<i.length;s++)for(var a=i[s],l=0,h=a.length,c=h-1;l<h;c=l++){var f=a[l],u=a[c];f[1]>e!=u[1]>e&&t<(u[0]-f[0])*(e-f[1])/(u[1]-f[1])+f[0]&&(r=!r),n=Math.min(n,o(t,e,f,u))}return 0===n?0:(r?1:-1)*Math.sqrt(n)}(t,e,r),this.max=this.d+this.h*Math.SQRT2}function o(t,e,i,r){var n=i[0],s=i[1],o=r[0]-n,a=r[1]-s;if(0!==o||0!==a){var l=((t-n)*o+(e-s)*a)/(o*o+a*a);l>1?(n=r[0],s=r[1]):l>0&&(n+=o*l,s+=a*l)}return(o=t-n)*o+(a=e-s)*a}i.default&&(i=i.default),e.exports=r,e.exports.default=r}}),b=d({"node_modules/@mapbox/vector-tile/lib/vectortilefeature.js"(t,e){var i=y();function r(t,e,i,r,s){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=s,t.readFields(n,this,e)}function n(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function s(t){for(var e,i,r=0,n=0,s=t.length,o=s-1;n<s;o=n++)e=t[n],r+=((i=t[o]).x-e.x)*(e.y+i.y);return r}e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,s=0,o=0,a=0,l=[];t.pos<r;){if(s<=0){var h=t.readVarint();n=7&h,s=h>>3}if(s--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new i(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,s=0,o=1/0,a=-1/0,l=1/0,h=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<o&&(o=n),n>a&&(a=n),(s+=t.readSVarint())<l&&(l=s),s>h&&(h=s);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,a,h]},r.prototype.toGeoJSON=function(t,e,i){var n,o,a=this.extent*Math.pow(2,i),l=this.extent*t,h=this.extent*e,c=this.loadGeometry(),f=r.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-360*(i.y+h)/a;t[e]=[360*(i.x+l)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<c.length;n++)d[n]=c[n][0];u(c=d);break;case 2:for(n=0;n<c.length;n++)u(c[n]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(c),n=0;n<c.length;n++)for(o=0;o<c[n].length;o++)u(c[n][o])}1===c.length?c=c[0]:f="Multi"+f;var p={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(p.id=this.id),p}}}),v=d({"node_modules/@mapbox/vector-tile/lib/vectortilelayer.js"(t,e){var i=b();function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(n,this,e),this.length=this._features.length}function n(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}e.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new i(this._pbf,e,this.extent,this._keys,this._values)}}}),_=d({"node_modules/@mapbox/vector-tile/lib/vectortile.js"(t,e){var i=v();function r(t,e,r){if(3===t){var n=new i(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}e.exports=function(t,e){this.layers=t.readFields(r,{},e)}}}),z=d({"node_modules/@mapbox/vector-tile/index.js"(t,e){e.exports.VectorTile=_(),e.exports.VectorTileFeature=b(),e.exports.VectorTileLayer=v()}}),k=d({"node_modules/ieee754/index.js"(t){t.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,l=(1<<a)-1,h=l>>1,c=-7,f=i?n-1:0,u=i?-1:1,d=t[e+f];for(f+=u,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+f],f+=u,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=u,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=h}return(d?-1:1)*o*Math.pow(2,s-r)},t.write=function(t,e,i,r,n,s){var o,a,l,h=8*s-n-1,c=(1<<h)-1,f=c>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+f>=1?u/l:u*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(e*l-1)*Math.pow(2,n),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,n),o=0));n>=8;t[i+d]=255&a,d+=p,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;t[i+d]=255&o,d+=p,o/=256,h-=8);t[i+d-p]|=128*m}}}),M=d({"node_modules/pbf/index.js"(t,e){e.exports=r;var i=k();function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var n=4294967296,s=1/n,o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function l(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function h(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function c(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function x(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=7&r,t(n,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=w(this.buf,this.pos)+w(this.buf,this.pos+4)*n;return this.pos+=8,t},readSFixed64:function(){var t=w(this.buf,this.pos)+v(this.buf,this.pos+4)*n;return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,s=i.buf;if(r=(112&(n=s[i.pos++]))>>4,n<128)return l(t,r,e);if(r|=(127&(n=s[i.pos++]))<<3,n<128)return l(t,r,e);if(r|=(127&(n=s[i.pos++]))<<10,n<128)return l(t,r,e);if(r|=(127&(n=s[i.pos++]))<<17,n<128)return l(t,r,e);if(r|=(127&(n=s[i.pos++]))<<24,n<128)return l(t,r,e);if(r|=(1&(n=s[i.pos++]))<<31,n<128)return l(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,i){return o.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var s,o,a,l=t[n],h=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>i)break;1===c?l<128&&(h=l):2===c?128==(192&(s=t[n+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(s=t[n+1],o=t[n+2],128==(192&s)&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(s=t[n+1],o=t[n+2],a=t[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,s=0;s<e.length;s++){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){r>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&h(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&h(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,x,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}}),F=d({"node_modules/rbush/rbush.min.js"(t,e){var r,n;r=t,n=function(){function t(t,r,n,s,o){!function t(i,r,n,s,o){for(;s>n;){if(s-n>600){var a=s-n+1,l=r-n+1,h=Math.log(a),c=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);t(i,r,Math.max(n,Math.floor(r-l*c/a+f)),Math.min(s,Math.floor(r+(a-l)*c/a+f)),o)}var u=i[r],d=n,p=s;for(e(i,n,r),o(i[s],u)>0&&e(i,n,s);d<p;){for(e(i,d,p),d++,p--;o(i[d],u)<0;)d++;for(;o(i[p],u)>0;)p--}0===o(i[n],u)?e(i,n,p):e(i,++p,s),p<=r&&(n=p+1),r<=p&&(s=p-1)}}(t,r,n||0,s||t.length-1,o||i)}function e(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function i(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,r,n){n||(n=p(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s=e;s<i;s++){var o=t.children[s];a(n,t.leaf?r(o):o)}return n}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,i,r,n,s){for(var o=[i,r];o.length;)if(!((r=o.pop())-(i=o.pop())<=n)){var a=i+Math.ceil((r-i)/n/2)*n;t(e,a,i,r,s),o.push(i,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,i=[];if(!d(t,e))return i;for(var r=this.toBBox,n=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?r(o):o;d(t,a)&&(e.leaf?i.push(o):u(t,a)?this._all(o,i):n.push(o))}e=n.pop()}return i},r.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var n=e.children[r],s=e.leaf?this.toBBox(n):n;if(d(t,s)){if(e.leaf||u(t,s))return!0;i.push(n)}}e=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var i,r,s,o=this.data,a=this.toBBox(t),l=[],h=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=h.pop(),s=!0),o.leaf){var c=n(t,o.children,e);if(-1!==c)return o.children.splice(c,1),l.push(o),this._condense(l),this}s||o.leaf||!u(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),h.push(i),i=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},r.prototype._build=function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return s(n=p(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(n=p([])).leaf=!1,n.height=r;var l=Math.ceil(o/a),h=l*Math.ceil(Math.sqrt(a));m(t,e,i,h,this.compareMinX);for(var c=e;c<=i;c+=h){var f=Math.min(c+h-1,i);m(t,c,f,l,this.compareMinY);for(var u=c;u<=f;u+=l){var d=Math.min(u+l-1,f);n.children.push(this._build(t,u,d,r-1))}}return s(n,this.toBBox),n},r.prototype._chooseSubtree=function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var n=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=c(l),f=(u=t,d=l,(Math.max(d.maxX,u.maxX)-Math.min(d.minX,u.minX))*(Math.max(d.maxY,u.maxY)-Math.min(d.minY,u.minY))-h);f<s?(s=f,n=h<n?h:n,o=l):f===s&&h<n&&(n=h,o=l)}e=o||e.children[0]}var u,d;return e},r.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),n=[],s=this._chooseSubtree(r,this.data,e,n);for(s.children.push(t),a(s,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)},r.prototype._split=function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=p(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},r.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,i){for(var r,n,s,a,l,h,f,u=1/0,d=1/0,p=e;p<=i-e;p++){var m=o(t,0,p,this.toBBox),y=o(t,p,i,this.toBBox),g=(n=m,s=y,a=Math.max(n.minX,s.minX),l=Math.max(n.minY,s.minY),h=Math.min(n.maxX,s.maxX),f=Math.min(n.maxY,s.maxY),Math.max(0,h-a)*Math.max(0,f-l)),x=c(m)+c(y);g<u?(u=g,r=p,d=x<d?x:d):g===u&&x<d&&(d=x,r=p)}return r||i-e},r.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var n=this.toBBox,s=o(t,0,e,n),l=o(t,i-e,i,n),h=f(s)+f(l),c=e;c<i-e;c++){var u=t.children[c];a(s,t.leaf?n(u):u),h+=f(s)}for(var d=i-e-1;d>=e;d--){var p=t.children[d];a(l,t.leaf?n(p):p),h+=f(l)}return h},r.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},r},"object"==typeof t&&void 0!==e?e.exports=n():"function"==typeof define&&i.amdO?define(n):(r=r||self).RBush=n()}}),C=p(y()),S={earth:"#151515",glacier:"#1c1c1c",residential:"#252B2F",hospital:"#3E2C2C",cemetery:"#36483D",school:"#2C3440",industrial:"#33312C",wood:"#3A3E38",grass:"#4E604D",park:"#2C4034",water:"#4D5B73",sand:"#777777",buildings:"#464545",highwayCasing:"#000000",majorRoadCasing:"#1C1B1B",mediumRoadCasing:"#3E3E3E",minorRoadCasing:"#000000",highway:"#5B5B5B",majorRoad:"#595959",mediumRoad:"#4F4F4F",minorRoad:"#393939",boundaries:"#666666",mask:"#dddddd",countryLabel:"#ffffff",cityLabel:"#FFFFFF",stateLabel:"#ffffff",neighbourhoodLabel:"#FDFDFD",landuseLabel:"#DDDDDD",waterLabel:"#707E95",naturalLabel:"#4c4c4c",roadsLabel:"#C4C4C4",poisLabel:"#959393"},T={earth:"#FFFBF6",glacier:"#ffffff",residential:"#F4F4F8",hospital:"#FFF6F6",cemetery:"#EFF2EE",school:"#F7F6FF",industrial:"#FFF9EF",wood:"#F4F9EF",grass:"#EBF9E3",park:"#E5F9D5",water:"#B7DFF2",sand:"#ebebeb",buildings:"#F2EDE8",highwayCasing:"#FFC3C3",majorRoadCasing:"#FFB9B9",mediumRoadCasing:"#FFCE8E",minorRoadCasing:"#cccccc",highway:"#FFCEBB",majorRoad:"#FFE4B3",mediumRoad:"#FFF2C8",minorRoad:"#ffffff",boundaries:"#9e9e9e",mask:"#dddddd",countryLabel:"#aaaaaa",cityLabel:"#6C6C6C",stateLabel:"#999999",neighbourhoodLabel:"#888888",landuseLabel:"#898989",waterLabel:"#41ABDC",naturalLabel:"#4B8F14",roadsLabel:"#888888",poisLabel:"#606060"};function B(t,e,i){return Math.min(Math.max(t,i),e)}var D=class extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}},X=t=>parseInt(t.replace(/_/g,""),36),Y="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((t,e)=>{const i=X(e.substring(0,3)),r=X(e.substring(3)).toString(16);let n="";for(let t=0;t<6-r.length;t++)n+="0";return t[i]=`${n}${r}`,t}),{}),P=(t,e)=>Array.from(Array(e)).map((()=>t)).join(""),j=new RegExp(`^#${P("([a-f0-9])",3)}([a-f0-9])?$`,"i"),V=new RegExp(`^#${P("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),E=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${P(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),$=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,I=/^[a-z]+$/i,A=t=>Math.round(255*t),U=(t,e,i)=>{let r=i/100;if(0===e)return[r,r,r].map(A);const n=(t%360+360)%360/60,s=(1-Math.abs(2*r-1))*(e/100),o=s*(1-Math.abs(n%2-1));let a=0,l=0,h=0;n>=0&&n<1?(a=s,l=o):n>=1&&n<2?(a=o,l=s):n>=2&&n<3?(l=s,h=o):n>=3&&n<4?(l=o,h=s):n>=4&&n<5?(a=o,h=s):n>=5&&n<6&&(a=s,h=o);const c=r-s/2;return[a+c,l+c,h+c].map(A)};function R(t){const[e,i,r,n]=function(t){if("string"!=typeof t)throw new D(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=I.test(t)?function(t){const e=t.toLowerCase().trim(),i=Y[function(t){let e=5381,i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return(e>>>0)%2341}(e)];if(!i)throw new D(t);return`#${i}`}(t):t;const i=j.exec(e);if(i){const t=Array.from(i).slice(1);return[...t.slice(0,3).map((t=>parseInt(P(t,2),16))),parseInt(P(t[3]||"f",2),16)/255]}const r=V.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,16))),parseInt(t[3]||"ff",16)/255]}const n=E.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,10))),parseFloat(t[3]||"1")]}const s=$.exec(e);if(s){const[e,i,r,n]=Array.from(s).slice(1).map(parseFloat);if(B(0,100,i)!==i)throw new D(t);if(B(0,100,r)!==r)throw new D(t);return[...U(e,i,r),n||1]}throw new D(t)}(t).map(((t,e)=>3===e?t:t/255)),s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;if(s===o)return[0,0,a,n];const l=s-o;return[60*(e===s?(i-r)/l+(i<r?6:0):i===s?(r-e)/l+2:(e-i)/l+4),a>.5?l/(2-s-o):l/(s+o),a,n]}function O(t,e,i,r){return`hsla(${(t%360).toFixed()}, ${B(0,100,100*e).toFixed()}%, ${B(0,100,100*i).toFixed()}%, ${parseFloat(B(0,1,r).toFixed(3))})`}var q=p(y()),W=p(g()),N=p(w()),Z=class{constructor(t,e){this.str=null!=t?t:e,this.per_feature="function"==typeof this.str&&2===this.str.length}get(t,e){return"function"==typeof this.str?this.str(t,e):this.str}},K=class{constructor(t,e=1){this.value=null!=t?t:e,this.per_feature="function"==typeof this.value&&2===this.value.length}get(t,e){return"function"==typeof this.value?this.value(t,e):this.value}},H=class{constructor(t){var e;this.label_props=null!=(e=null==t?void 0:t.label_props)?e:["name"],this.textTransform=null==t?void 0:t.textTransform}get(t,e){let i,r,n;r="function"==typeof this.label_props?this.label_props(t,e):this.label_props;for(const t of r)if(e.props.hasOwnProperty(t)&&"string"==typeof e.props[t]){i=e.props[t];break}if(n="function"==typeof this.textTransform?this.textTransform(t,e):this.textTransform,i&&"uppercase"===n)i=i.toUpperCase();else if(i&&"lowercase"===n)i=i.toLowerCase();else if(i&&"capitalize"===n){const t=i.toLowerCase().split(" ");i=t.map((t=>t[0].toUpperCase()+t.slice(1))).join(" ")}return i}},J=class{constructor(t){var e,i;(null==t?void 0:t.font)?this.font=t.font:(this.family=null!=(e=null==t?void 0:t.fontFamily)?e:"sans-serif",this.size=null!=(i=null==t?void 0:t.fontSize)?i:12,this.weight=null==t?void 0:t.fontWeight,this.style=null==t?void 0:t.fontStyle)}get(t,e){if(this.font)return"function"==typeof this.font?this.font(t,e):this.font;let i="";this.style&&(i="function"==typeof this.style?`${this.style(t,e)} `:`${this.style} `);let r,n,s="";return this.weight&&(s="function"==typeof this.weight?`${this.weight(t,e)} `:`${this.weight} `),r="function"==typeof this.size?this.size(t,e):this.size,n="function"==typeof this.family?this.family(t,e):this.family,`${i}${s}${r}px ${n}`}},G=class{constructor(t,e=[]){this.value=null!=t?t:e,this.per_feature="function"==typeof this.value&&2===this.value.length}get(t,e){return"function"==typeof this.value?this.value(t,e):this.value}},Q=p(y()),tt=(t,e,i)=>{const r=[];let n,s,o,a=0,l=0,h=0,c=0,u=0,d=0,p=0,m=0,y=0,g=0,x=0,w=0;if(t.length<2)return[];if(2===t.length)return h=Math.sqrt(f(t[1].x-t[0].x,2)+f(t[1].y-t[0].y,2)),[{length:h,beginIndex:0,beginDistance:0,endIndex:2,endDistance:h}];for(c=Math.sqrt(f(t[1].x-t[0].x,2)+f(t[1].y-t[0].y,2)),a=1,l=t.length-1;a<l;a++)n=t[a-1],s=t[a],o=t[a+1],d=s.x-n.x,p=s.y-n.y,m=o.x-s.x,y=o.y-s.y,u=Math.sqrt(m*m+y*y),h+=c,g=Math.acos((d*m+p*y)/(c*u)),(g>e||h-w>i)&&(r.push({length:h-w,beginDistance:w,beginIndex:x,endIndex:a+1,endDistance:h}),x=a,w=h),c=u;return a-x>0&&r.push({length:h-w+u,beginIndex:x,beginDistance:w,endIndex:a+1,endDistance:h+u}),r};function et(t,e,i,r){const n=e.x-t.x,s=e.y-t.y,o=Math.sqrt(f(e.x-t.x,2)+f(e.y-t.y,2)),a=[];for(let e=0;e<i+r;e+=2*r){const i=1*e/o;a.push({x:t.x+i*n,y:t.y+i*s})}return a}function it(t,e){if(t.length<=e)return[t];const i=e-1,r=t.lastIndexOf(" ",i),n=t.indexOf(" ",i);if(-1===r&&-1===n)return[t];let s,o;return-1===n||r>=0&&i-r<n-i?(s=t.substring(0,r),o=t.substring(r+1,t.length)):(s=t.substring(0,n),o=t.substring(n+1,t.length)),[s,...it(o,e)]}new RegExp("^[々-〇〡-〩〱-〵〸-〼㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿㐀-䶵一-鿪豈-舘並-龎 ]+$");var rt=p(y()),nt=p(z()),st=p(M()),ot=(t,e,i)=>new Promise(((r,n)=>{var s=t=>{try{a(i.next(t))}catch(t){n(t)}},o=t=>{try{a(i.throw(t))}catch(t){n(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(s,o);a((i=i.apply(t,e)).next())})),at=Uint8Array,lt=Uint16Array,ht=Uint32Array,ct=new at([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ft=new at([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ut=new at([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dt=function(t,e){for(var i=new lt(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];var n=new ht(i[30]);for(r=1;r<30;++r)for(var s=i[r];s<i[r+1];++s)n[s]=s-i[r]<<5|r;return[i,n]},pt=dt(ct,2),mt=pt[0],yt=pt[1];mt[28]=258,yt[258]=28;var gt,xt=dt(ft,0),wt=xt[0],bt=(xt[1],new lt(32768));for(zt=0;zt<32768;++zt)gt=(61680&(gt=(52428&(gt=(43690&zt)>>>1|(21845&zt)<<1))>>>2|(13107&gt)<<2))>>>4|(3855&gt)<<4,bt[zt]=((65280&gt)>>>8|(255&gt)<<8)>>>1;var vt=function(t,e,i){for(var r=t.length,n=0,s=new lt(e);n<r;++n)t[n]&&++s[t[n]-1];var o,a=new lt(e);for(n=0;n<e;++n)a[n]=a[n-1]+s[n-1]<<1;if(i){o=new lt(1<<e);var l=15-e;for(n=0;n<r;++n)if(t[n])for(var h=n<<4|t[n],c=e-t[n],f=a[t[n]-1]++<<c,u=f|(1<<c)-1;f<=u;++f)o[bt[f]>>>l]=h}else for(o=new lt(r),n=0;n<r;++n)t[n]&&(o[n]=bt[a[t[n]-1]++]>>>15-t[n]);return o},_t=new at(288);for(zt=0;zt<144;++zt)_t[zt]=8;for(zt=144;zt<256;++zt)_t[zt]=9;for(zt=256;zt<280;++zt)_t[zt]=7;for(zt=280;zt<288;++zt)_t[zt]=8;var zt,kt=new at(32);for(zt=0;zt<32;++zt)kt[zt]=5;var Mt=vt(_t,9,1),Lt=vt(kt,5,1),Ft=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},Ct=function(t,e,i){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&i},St=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},Tt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bt=function(t,e,i){var r=new Error(e||Tt[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Bt),!i)throw r;return r},Dt=function(t,e,i){var r=t.length;if(!r||i&&i.f&&!i.l)return e||new at(0);var n=!e||i,s=!i||i.i;i||(i={}),e||(e=new at(3*r));var o=function(t){var i=e.length;if(t>i){var r=new at(Math.max(2*i,t));r.set(e),e=r}},a=i.f||0,l=i.p||0,h=i.b||0,c=i.l,f=i.d,u=i.m,d=i.n,p=8*r;do{if(!c){a=Ct(t,l,1);var m=Ct(t,l+1,3);if(l+=3,!m){var y=t[(F=4+((l+7)/8|0))-4]|t[F-3]<<8,g=F+y;if(g>r){s&&Bt(0);break}n&&o(h+y),e.set(t.subarray(F,g),h),i.b=h+=y,i.p=l=8*g,i.f=a;continue}if(1==m)c=Mt,f=Lt,u=9,d=5;else if(2==m){var x=Ct(t,l,31)+257,w=Ct(t,l+10,15)+4,b=x+Ct(t,l+5,31)+1;l+=14;for(var v=new at(b),_=new at(19),z=0;z<w;++z)_[ut[z]]=Ct(t,l+3*z,7);l+=3*w;var k=Ft(_),M=(1<<k)-1,L=vt(_,k,1);for(z=0;z<b;){var F,C=L[Ct(t,l,M)];if(l+=15&C,(F=C>>>4)<16)v[z++]=F;else{var S=0,T=0;for(16==F?(T=3+Ct(t,l,3),l+=2,S=v[z-1]):17==F?(T=3+Ct(t,l,7),l+=3):18==F&&(T=11+Ct(t,l,127),l+=7);T--;)v[z++]=S}}var B=v.subarray(0,x),D=v.subarray(x);u=Ft(B),d=Ft(D),c=vt(B,u,1),f=vt(D,d,1)}else Bt(1);if(l>p){s&&Bt(0);break}}n&&o(h+131072);for(var X=(1<<u)-1,Y=(1<<d)-1,P=l;;P=l){var j=(S=c[St(t,l)&X])>>>4;if((l+=15&S)>p){s&&Bt(0);break}if(S||Bt(2),j<256)e[h++]=j;else{if(256==j){P=l,c=null;break}var V=j-254;if(j>264){var E=ct[z=j-257];V=Ct(t,l,(1<<E)-1)+mt[z],l+=E}var $=f[St(t,l)&Y],I=$>>>4;if($||Bt(3),l+=15&$,D=wt[I],I>3&&(E=ft[I],D+=St(t,l)&(1<<E)-1,l+=E),l>p){s&&Bt(0);break}n&&o(h+131072);for(var A=h+V;h<A;h+=4)e[h]=e[h-D],e[h+1]=e[h+1-D],e[h+2]=e[h+2-D],e[h+3]=e[h+3-D];h=A}}i.l=c,i.p=P,i.b=h,i.f=a,c&&(a=1,i.m=u,i.d=f,i.n=d)}while(!a);return h==e.length?e:function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var r=new(2==t.BYTES_PER_ELEMENT?lt:4==t.BYTES_PER_ELEMENT?ht:at)(i-e);return r.set(t.subarray(e,i)),r}(e,0,h)},Xt=new at(0),Yt=function(t){31==t[0]&&139==t[1]&&8==t[2]||Bt(6,"invalid gzip data");var e=t[3],i=10;4&e&&(i+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[i++]);return i+(2&e)},Pt=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},jt=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Bt(6,"invalid zlib data"),32&t[1]&&Bt(6,"invalid zlib data: preset dictionaries not supported")};function Vt(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?function(t,e){return Dt(t.subarray(Yt(t),-8),e||new at(Pt(t)))}(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?function(t,e){return Dt(t,e)}(t,e):function(t,e){return Dt((jt(t),t.subarray(2,-4)),e)}(t,e)}var Et="undefined"!=typeof TextDecoder&&new TextDecoder;try{Et.decode(Xt,{stream:!0})}catch(t){}var $t=(t,e)=>t*Math.pow(2,e),It=(t,e)=>Math.floor(t/Math.pow(2,e)),At=(t,e)=>$t(t.getUint16(e+1,!0),8)+t.getUint8(e),Ut=(t,e)=>$t(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),Rt=(t,e,i,r,n)=>{if(t!=r.getUint8(n))return t-r.getUint8(n);const s=At(r,n+1);if(e!=s)return e-s;const o=At(r,n+4);return i!=o?i-o:0},Ot=(t,e,i,r)=>{const n=qt(t,e,i,r);return n?{z:e,x:i,y:r,offset:n[0],length:n[1],is_dir:!1}:null},qt=(t,e,i,r)=>{let n=0,s=t.byteLength/17-1;for(;n<=s;){const o=s+n>>1,a=Rt(e,i,r,t,17*o);if(a>0)n=o+1;else{if(!(a<0))return[Ut(t,17*o+7),t.getUint32(17*o+13,!0)];s=o-1}}return null},Wt=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,Nt=(t,e)=>{const i=t.getUint8(17*e);return{z:127&i,x:At(t,17*e+1),y:At(t,17*e+4),offset:Ut(t,17*e+7),length:t.getUint32(17*e+13,!0),is_dir:i>>7==1}},Zt=t=>{const e=[],i=new DataView(t);for(let t=0;t<i.byteLength/17;t++)e.push(Nt(i,t));return Kt(e)},Kt=t=>{t.sort(Wt);const e=new ArrayBuffer(17*t.length),i=new Uint8Array(e);for(let e=0;e<t.length;e++){const r=t[e];let n=r.z;r.is_dir&&(n|=128),i[17*e]=n,i[17*e+1]=255&r.x,i[17*e+2]=r.x>>8&255,i[17*e+3]=r.x>>16&255,i[17*e+4]=255&r.y,i[17*e+5]=r.y>>8&255,i[17*e+6]=r.y>>16&255,i[17*e+7]=255&r.offset,i[17*e+8]=255&It(r.offset,8),i[17*e+9]=255&It(r.offset,16),i[17*e+10]=255&It(r.offset,24),i[17*e+11]=255&It(r.offset,32),i[17*e+12]=255&It(r.offset,48),i[17*e+13]=255&r.length,i[17*e+14]=r.length>>8&255,i[17*e+15]=r.length>>16&255,i[17*e+16]=r.length>>24&255}return e},Ht={getHeader:function(t){return ot(this,null,(function*(){const e=yield t.getBytes(0,512e3),i=new DataView(e.data),r=i.getUint32(4,!0),n=i.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,r)));let a=0;"gzip"===o.compression&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let h=0;"maxzoom"in o&&(h=+o.maxzoom);let c=0,f=0,u=0,d=-180,p=-85,m=180,y=85;if(o.bounds){const t=o.bounds.split(",");d=+t[0],p=+t[1],m=+t[2],y=+t[3]}if(o.center){const t=o.center.split(",");c=+t[0],f=+t[1],u=+t[2]}return{specVersion:i.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:17*n,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:h,minLon:d,minLat:p,maxLon:m,maxLat:y,centerZoom:u,centerLon:c,centerLat:f,etag:e.etag}}))},getZxy:function(t,e,i,r,n,s,o){return ot(this,null,(function*(){let a=yield i.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);1===t.specVersion&&(a=Zt(a));const l=Ot(new DataView(a),r,n,s);if(l){let t=(yield e.getBytes(l.offset,l.length,o)).data;const i=new DataView(t);return 31==i.getUint8(0)&&139==i.getUint8(1)&&(t=Vt(new Uint8Array(t))),{data:t}}const h=((t,e)=>{if(t.byteLength<17)return null;const i=t.byteLength/17,r=Nt(t,i-1);if(r.is_dir){const t=r.z,i=e.z-t;return{z:t,x:Math.trunc(e.x/(1<<i)),y:Math.trunc(e.y/(1<<i))}}return null})(new DataView(a),{z:r,x:n,y:s});if(h){const l=((t,e,i,r)=>{const n=qt(t,128|e,i,r);return n?{z:e,x:i,y:r,offset:n[0],length:n[1],is_dir:!0}:null})(new DataView(a),h.z,h.x,h.y);if(l){let a=yield i.getArrayBuffer(e,l.offset,l.length,t);1===t.specVersion&&(a=Zt(a));const h=Ot(new DataView(a),r,n,s);if(h){let t=(yield e.getBytes(h.offset,h.length,o)).data;const i=new DataView(t);return 31==i.getUint8(0)&&139==i.getUint8(1)&&(t=Vt(new Uint8Array(t))),{data:t}}}}}))}};function Jt(t,e){return 4294967296*(e>>>0)+(t>>>0)}function Gt(t){const e=t.buf;let i,r;return r=e[t.pos++],i=127&r,r<128?i:(r=e[t.pos++],i|=(127&r)<<7,r<128?i:(r=e[t.pos++],i|=(127&r)<<14,r<128?i:(r=e[t.pos++],i|=(127&r)<<21,r<128?i:(r=e[t.pos],i|=(15&r)<<28,function(t,e){const i=e.buf;let r,n;if(n=i[e.pos++],r=(112&n)>>4,n<128)return Jt(t,r);if(n=i[e.pos++],r|=(127&n)<<3,n<128)return Jt(t,r);if(n=i[e.pos++],r|=(127&n)<<10,n<128)return Jt(t,r);if(n=i[e.pos++],r|=(127&n)<<17,n<128)return Jt(t,r);if(n=i[e.pos++],r|=(127&n)<<24,n<128)return Jt(t,r);if(n=i[e.pos++],r|=(1&n)<<31,n<128)return Jt(t,r);throw new Error("Expected varint not more than 10 bytes")}(i,t)))))}function Qt(t,e,i,r){if(0==r){1==i&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}function te(t,e){return ot(this,null,(function*(){if(1===e||0===e)return t;if(2===e)return Vt(new Uint8Array(t));throw Error("Compression method not supported")}))}function ee(t,e){let i=0,r=t.length-1;for(;i<=r;){const n=r+i>>1,s=e-t[n].tileId;if(s>0)i=n+1;else{if(!(s<0))return t[n];r=n-1}}if(r>=0){if(0===t[r].runLength)return t[r];if(e-t[r].tileId<t[r].runLength)return t[r]}return null}var ie=class{constructor(t){this.url=t}getKey(){return this.url}getBytes(t,e,i){return ot(this,null,(function*(){let r;i||(r=new AbortController,i=r.signal);let n=yield fetch(this.url,{signal:i,headers:{Range:"bytes="+t+"-"+(t+e-1)}});if(416===n.status&&0===t){const t=n.headers.get("Content-Range");if(!t||!t.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const e=+t.substr(8);n=yield fetch(this.url,{signal:i,headers:{Range:"bytes=0-"+(e-1)}})}if(n.status>=300)throw Error("Bad response code: "+n.status);const s=n.headers.get("Content-Length");if(200===n.status&&(!s||+s>e))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield n.arrayBuffer(),etag:n.headers.get("ETag")||void 0,cacheControl:n.headers.get("Cache-Control")||void 0,expires:n.headers.get("Expires")||void 0}}))}};function re(t,e){const i=t.getUint32(e+4,!0),r=t.getUint32(e+0,!0);return i*Math.pow(2,32)+r}function ne(t){const e={buf:new Uint8Array(t),pos:0},i=Gt(e),r=[];let n=0;for(let t=0;t<i;t++){const t=Gt(e);r.push({tileId:n+t,offset:0,length:0,runLength:1}),n+=t}for(let t=0;t<i;t++)r[t].runLength=Gt(e);for(let t=0;t<i;t++)r[t].length=Gt(e);for(let t=0;t<i;t++){const i=Gt(e);r[t].offset=0===i&&t>0?r[t-1].offset+r[t-1].length:i-1}return r}var se=class extends Error{};var oe=class{constructor(t=100,e=!0,i=te){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=i}getHeader(t,e){return ot(this,null,(function*(){const i=t.getKey();if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const r=new Promise(((i,r)=>{(function(t,e,i,r){return ot(this,null,(function*(){const n=yield t.getBytes(0,16384);if(19792!==new DataView(n.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");if(function(t){const e=new DataView(t);return 2===e.getUint16(2,!0)?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):1===e.getUint16(2,!0)?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}(n.data)<3)return[yield Ht.getHeader(t)];const s=n.data.slice(0,127);let o=n.etag;r&&n.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),o=void 0);const a=function(t,e){const i=new DataView(t),r=i.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:re(i,8),rootDirectoryLength:re(i,16),jsonMetadataOffset:re(i,24),jsonMetadataLength:re(i,32),leafDirectoryOffset:re(i,40),leafDirectoryLength:re(i,48),tileDataOffset:re(i,56),tileDataLength:re(i,64),numAddressedTiles:re(i,72),numTileEntries:re(i,80),numTileContents:re(i,88),clustered:1===i.getUint8(96),internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:e}}(s,o);if(i){const i=n.data.slice(a.rootDirectoryOffset,a.rootDirectoryOffset+a.rootDirectoryLength),r=t.getKey()+"|"+(a.etag||"")+"|"+a.rootDirectoryOffset+"|"+a.rootDirectoryLength,s=ne(yield e(i,a.internalCompression));return[a,[r,s.length,s]]}return[a,void 0]}))})(t,this.decompress,this.prefetch,e).then((t=>{t[1]&&this.cache.set(t[1][0],{lastUsed:this.counter++,data:Promise.resolve(t[1][2])}),i(t[0]),this.prune()})).catch((t=>{r(t)}))}));return this.cache.set(i,{lastUsed:this.counter++,data:r}),r}))}getDirectory(t,e,i,r){return ot(this,null,(function*(){const n=t.getKey()+"|"+(r.etag||"")+"|"+e+"|"+i;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise(((n,s)=>{(function(t,e,i,r,n){return ot(this,null,(function*(){const s=yield t.getBytes(i,r);if(n.etag&&n.etag!==s.etag)throw new se(s.etag);const o=ne(yield e(s.data,n.internalCompression));if(0===o.length)throw new Error("Empty directory is invalid");return o}))})(t,this.decompress,e,i,r).then((t=>{n(t),this.prune()})).catch((t=>{s(t)}))}));return this.cache.set(n,{lastUsed:this.counter++,data:s}),s}))}getArrayBuffer(t,e,i,r){return ot(this,null,(function*(){const n=t.getKey()+"|"+(r.etag||"")+"|"+e+"|"+i;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const s=new Promise(((s,o)=>{t.getBytes(e,i).then((t=>{if(r.etag&&r.etag!==t.etag)throw new se(t.etag);s(t.data),this.cache.has(n),this.prune()})).catch((t=>{o(t)}))}));return this.cache.set(n,{lastUsed:this.counter++,data:s}),s}))}prune(){if(this.cache.size>=this.maxCacheEntries){let t,e=1/0;this.cache.forEach(((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)})),t&&this.cache.delete(t)}}invalidate(t,e){return ot(this,null,(function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)}))}},ae=class{constructor(t,e,i){this.source="string"==typeof t?new ie(t):t,this.decompress=i||te,this.cache=e||new oe}getHeader(){return ot(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(t,e,i,r){return ot(this,null,(function*(){const n=function(t,e,i){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||i>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");let r=0,n=0;for(;n<t;)r+=Math.pow(2,n)*Math.pow(2,n),n++;let s=0,o=0,a=0;const l=[e,i];let h=Math.pow(2,t)/2;for(;h>0;)s=(l[0]&h)>0?1:0,o=(l[1]&h)>0?1:0,a+=h*h*(3*s^o),Qt(h,l,s,o),h/=2;return r+a}(t,e,i),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return Ht.getZxy(s,this.source,this.cache,t,e,i,r);if(t<s.minZoom||t>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let t=0;t<=3;t++){const t=ee(yield this.cache.getDirectory(this.source,o,a,s),n);if(!t)return;if(t.runLength>0){const e=yield this.source.getBytes(s.tileDataOffset+t.offset,t.length,r);if(s.etag&&s.etag!==e.etag)throw new se(e.etag);return{data:yield this.decompress(e.data,s.tileCompression),cacheControl:e.cacheControl,expires:e.expires}}o=s.leafDirectoryOffset+t.offset,a=t.length}throw Error("Maximum directory depth exceeded")}))}getZxy(t,e,i,r){return ot(this,null,(function*(){try{return yield this.getZxyAttempt(t,e,i,r)}catch(n){if(n instanceof se)return this.cache.invalidate(this.source,n.message),yield this.getZxyAttempt(t,e,i,r);throw n}}))}getMetadataAttempt(){return ot(this,null,(function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new se(e.etag);const i=yield this.decompress(e.data,t.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))}))}getMetadata(){return ot(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof se)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}}))}},le=(t=>(t[t.Point=1]="Point",t[t.Line=2]="Line",t[t.Polygon=3]="Polygon",t))(le||{});function he(t){return`${t.x}:${t.y}:${t.z}`}var ce=(t,e,i)=>{t.pos=e;const r=t.readVarint()+t.pos;let n=1,s=0,o=0,a=0,l=1/0,h=-1/0,c=1/0,f=-1/0;const u=[];let d=[];for(;t.pos<r;){if(s<=0){const e=t.readVarint();n=7&e,s=e>>3}if(s--,1===n||2===n)o+=t.readSVarint()*i,a+=t.readSVarint()*i,o<l&&(l=o),o>h&&(h=o),a<c&&(c=a),a>f&&(f=a),1===n&&(d.length>0&&u.push(d),d=[]),d.push(new rt.default(o,a));else{if(7!==n)throw new Error(`unknown command ${n}`);d&&d.push(d[0].clone())}}return d&&u.push(d),{geom:u,bbox:{minX:l,minY:c,maxX:h,maxY:f}}};function fe(t,e){const i=new nt.VectorTile(new st.default(t)),r=new Map;for(const[t,n]of Object.entries(i.layers)){const i=[],s=n;for(let t=0;t<s.length;t++){const r=ce(s.feature(t)._pbf,s.feature(t)._geometry,e/s.extent);let n=0;for(const t of r.geom)n+=t.length;i.push({id:s.feature(t).id,geomType:s.feature(t).type,geom:r.geom,numVertices:n,bbox:r.bbox,props:s.feature(t).properties})}r.set(t,i)}return r}var ue=class{constructor(t,e){this.p="string"==typeof t?new ae(t):t,this.zoomaborts=[],this.shouldCancelZooms=e}get(t,e){return m(this,null,(function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter((e=>e.z===t.z||(e.controller.abort(),!1))));const i=new AbortController;this.zoomaborts.push({z:t.z,controller:i});const r=i.signal,n=yield this.p.getZxy(t.z,t.x,t.y,r);return n?fe(n.data,e):new Map}))}},de=class{constructor(t,e){this.url=t,this.zoomaborts=[],this.shouldCancelZooms=e}get(t,e){return m(this,null,(function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter((e=>e.z===t.z||(e.controller.abort(),!1))));const i=this.url.replace("{z}",t.z.toString()).replace("{x}",t.x.toString()).replace("{y}",t.y.toString()),r=new AbortController;this.zoomaborts.push({z:t.z,controller:r});const n=r.signal;return new Promise(((t,r)=>{fetch(i,{signal:n}).then((t=>t.arrayBuffer())).then((i=>{const r=fe(i,e);t(r)})).catch((t=>{r(t)}))}))}))}},pe=6378137,me=85.0511287798,ye=pe*Math.PI;function ge(t){return t*t}function xe(t,e){return ge(t.x-e.x)+ge(t.y-e.y)}function we(t,e,i){const r=xe(e,i);if(0===r)return xe(t,e);let n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return n=Math.max(0,Math.min(1,n)),xe(t,new rt.default(e.x+n*(i.x-e.x),e.y+n*(i.y-e.y)))}function be(t,e){let i=!1;for(let r=0,n=e.length-1;r<e.length;n=r++){const s=e[r].x,o=e[r].y,a=e[n].x,l=e[n].y;o>t.y!=l>t.y&&t.x<(a-s)*(t.y-o)/(l-o)+s&&(i=!i)}return i}function ve(t){let e=0;for(let i=0;i<t.length;i++){const r=(i+1)%t.length;e+=t[i].x*t[r].y,e-=t[r].x*t[i].y}return e<0}function _e(t,e){let i=!1;for(const r of e)if(ve(r))be(t,r)&&(i=!1);else{if(i)return!0;be(t,r)&&(i=!0)}return i}function ze(t,e){let i=1/0;for(const r of e){const e=Math.sqrt(xe(t,r[0]));e<i&&(i=e)}return i}function ke(t,e){let i=1/0;for(const r of e)for(let e=0;e<r.length-1;e++){const n=Math.sqrt(we(t,r[e],r[e+1]));n<i&&(i=n)}return i}var Me=class{constructor(t,e){this.source=t,this.cache=new Map,this.inflight=new Map,this.tileSize=e}queryFeatures(t,e,i,r){const n=(t=>{const e=Math.PI/180,i=Math.max(Math.min(me,t[0]),-me),r=Math.sin(i*e);return new rt.default(pe*t[1]*e,pe*Math.log((1+r)/(1-r))/2)})([e,t]),s=new rt.default((n.x+ye)/(2*ye),1-(n.y+ye)/(2*ye));s.x>1&&(s.x=s.x-Math.floor(s.x));const o=s.mult(1<<i),a=Math.floor(o.x),l=Math.floor(o.y),h=he({z:i,x:a,y:l}),c=[],f=this.cache.get(h);if(f){const t=new rt.default((o.x-a)*this.tileSize,(o.y-l)*this.tileSize);for(const[e,i]of f.data.entries())for(const n of i)1===n.geomType?ze(t,n.geom)<r&&c.push({feature:n,layerName:e}):2===n.geomType?ke(t,n.geom)<r&&c.push({feature:n,layerName:e}):_e(t,n.geom)&&c.push({feature:n,layerName:e})}return c}get(t){return m(this,null,(function*(){const e=he(t);return new Promise(((i,r)=>{const n=this.cache.get(e);if(n)n.used=performance.now(),i(n.data);else{const n=this.inflight.get(e);n?n.push([i,r]):(this.inflight.set(e,[]),this.source.get(t,this.tileSize).then((t=>{this.cache.set(e,{used:performance.now(),data:t});const r=this.inflight.get(e);if(r)for(const e of r)e[0](t);if(this.inflight.delete(e),i(t),this.cache.size>=64){let t,e=1/0;this.cache.forEach(((i,r)=>{i.used<e&&(e=i.used,t=r)})),t&&this.cache.delete(t)}})).catch((t=>{const i=this.inflight.get(e);if(i)for(const e of i)e[1](t);this.inflight.delete(e),r(t)})))}}))}))}},Le=(t=>(t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right",t))(Le||{}),Fe=(t=>(t[t.N=1]="N",t[t.NE=2]="NE",t[t.E=3]="E",t[t.SE=4]="SE",t[t.S=5]="S",t[t.SW=6]="SW",t[t.W=7]="W",t[t.NW=8]="NW",t))(Fe||{}),Ce=(t,e,i)=>{const r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t,r.height=e,null!==n&&i(r,n),r},Se=class{constructor(t){var e;this.pattern=t.pattern,this.fill=new Z(t.fill,"black"),this.opacity=new K(t.opacity,1),this.stroke=new Z(t.stroke,"black"),this.width=new K(t.width,0),this.per_feature=null!=(e=this.fill.per_feature||this.opacity.per_feature||this.stroke.per_feature||this.width.per_feature||t.per_feature)&&e,this.do_stroke=!1}before(t,e){if(!this.per_feature){t.globalAlpha=this.opacity.get(e),t.fillStyle=this.fill.get(e),t.strokeStyle=this.stroke.get(e);const i=this.width.get(e);i>0&&(this.do_stroke=!0),t.lineWidth=i}if(this.pattern){const e=t.createPattern(this.pattern,"repeat");e&&(t.fillStyle=e)}}draw(t,e,i,r){let n=!1;if(this.per_feature){t.globalAlpha=this.opacity.get(i,r),t.fillStyle=this.fill.get(i,r);const e=this.width.get(i,r);e&&(n=!0,t.strokeStyle=this.stroke.get(i,r),t.lineWidth=e)}const s=()=>{t.fill(),(n||this.do_stroke)&&t.stroke()};let o=0;t.beginPath();for(const i of e){o+i.length>5400&&(s(),o=0,t.beginPath());for(let e=0;e<i.length;e++){const r=i[e];0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y)}o+=i.length}o>0&&s()}};function Te(t,e){return i=>{const r=i-t;return r>=0&&r<e.length?e[r]:0}}function Be(t,e){let i=0;for(;e[i+1][0]<t;)i++;return i}function De(t,e,i){return t*(i-e)+e}function Xe(t,e,i,r){const n=r[e+1][0]-r[e][0],s=t-r[e][0];return 0===n?0:1===i?s/n:(f(i,s)-1)/(f(i,n)-1)}function Ye(t,e){return i=>{if(e.length<1)return 0;if(i<=e[0][0])return e[0][1];if(i>=e[e.length-1][0])return e[e.length-1][1];const r=Be(i,e);return De(Xe(i,r,t,e),e[r][1],e[r+1][1])}}function Pe(t,e){return i=>{if(e.length<1)return 0;let r=t;for(let t=0;t<e.length;t++)i>=e[t][0]&&(r=e[t][1]);return r}}function je(t){return Ye(1,t)}function Ve(t,e,i,r,n){return s=>{if(n.length<1)return 0;const o=new W.default(t,e,i,r),a=Be(s,n);return De(o.solve(Xe(s,a,1,n)),n[a][1],n[a+1][1])}}var Ee=class{constructor(t){var e;this.color=new Z(t.color,"black"),this.width=new K(t.width),this.opacity=new K(t.opacity),this.dash=t.dash?new G(t.dash):null,this.dashColor=new Z(t.dashColor,"black"),this.dashWidth=new K(t.dashWidth,1),this.lineCap=new Z(t.lineCap,"butt"),this.lineJoin=new Z(t.lineJoin,"miter"),this.skip=!1,this.per_feature=!!((null==(e=this.dash)?void 0:e.per_feature)||this.color.per_feature||this.opacity.per_feature||this.width.per_feature||this.lineCap.per_feature||this.lineJoin.per_feature||t.per_feature)}before(t,e){this.per_feature||(t.strokeStyle=this.color.get(e),t.lineWidth=this.width.get(e),t.globalAlpha=this.opacity.get(e),t.lineCap=this.lineCap.get(e),t.lineJoin=this.lineJoin.get(e))}draw(t,e,i,r){if(this.skip)return;const n=()=>{this.per_feature&&(t.globalAlpha=this.opacity.get(i,r),t.lineCap=this.lineCap.get(i,r),t.lineJoin=this.lineJoin.get(i,r)),this.dash?(t.save(),this.per_feature?(t.lineWidth=this.dashWidth.get(i,r),t.strokeStyle=this.dashColor.get(i,r),t.setLineDash(this.dash.get(i,r))):t.setLineDash(this.dash.get(i)),t.stroke(),t.restore()):(t.save(),this.per_feature&&(t.lineWidth=this.width.get(i,r),t.strokeStyle=this.color.get(i,r)),t.stroke(),t.restore())};let s=0;t.beginPath();for(const i of e){s+i.length>5400&&(n(),s=0,t.beginPath());for(let e=0;e<i.length;e++){const r=i[e];0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y)}s+=i.length}s>0&&n()}},$e=class{constructor(t){this.name=t.name,this.sheet=t.sheet,this.dpr=window.devicePixelRatio}place(t,e,i){e[0];const r=new q.default(e[0][0].x,e[0][0].y),n=this.sheet.get(this.name),s=n.w/this.dpr,o=n.h/this.dpr;return[{anchor:r,bboxes:[{minX:r.x-s/2,minY:r.y-o/2,maxX:r.x+s/2,maxY:r.y+o/2}],draw:t=>{t.globalAlpha=1,t.drawImage(this.sheet.canvas,n.x,n.y,n.w,n.h,-n.w/2/this.dpr,-n.h/2/this.dpr,n.w/2,n.h/2)}}]}},Ie=class{constructor(t){this.radius=new K(t.radius,3),this.fill=new Z(t.fill,"black"),this.stroke=new Z(t.stroke,"white"),this.width=new K(t.width,0),this.opacity=new K(t.opacity)}draw(t,e,i,r){t.globalAlpha=this.opacity.get(i,r);const n=this.radius.get(i,r),s=this.width.get(i,r);s>0&&(t.strokeStyle=this.stroke.get(i,r),t.lineWidth=s,t.beginPath(),t.arc(e[0][0].x,e[0][0].y,n+s/2,0,2*Math.PI),t.stroke()),t.fillStyle=this.fill.get(i,r),t.beginPath(),t.arc(e[0][0].x,e[0][0].y,n,0,2*Math.PI),t.fill()}place(t,e,i){e[0];const r=new q.default(e[0][0].x,e[0][0].y),n=this.radius.get(t.zoom,i);return[{anchor:r,bboxes:[{minX:r.x-n,minY:r.y-n,maxX:r.x+n,maxY:r.y+n}],draw:e=>{this.draw(e,[[new q.default(0,0)]],t.zoom,i)}}]}},Ae=class{constructor(t){this.font=new J(t),this.text=new H(t),this.fill=new Z(t.fill,"black"),this.background=new Z(t.background,"white"),this.padding=new K(t.padding,0)}place(t,e,i){const r=this.text.get(t.zoom,i);if(!r)return;const n=this.font.get(t.zoom,i);t.scratch.font=n;const s=t.scratch.measureText(r),o=s.width,a=s.actualBoundingBoxAscent,l=s.actualBoundingBoxDescent,h=(e[0],new q.default(e[0][0].x,e[0][0].y)),c=this.padding.get(t.zoom,i);return[{anchor:h,bboxes:[{minX:h.x-o/2-c,minY:h.y-a-c,maxX:h.x+o/2+c,maxY:h.y+l+c}],draw:e=>{e.globalAlpha=1,e.fillStyle=this.background.get(t.zoom,i),e.fillRect(-o/2-c,-a-c,o+2*c,a+l+2*c),e.fillStyle=this.fill.get(t.zoom,i),e.font=n,e.fillText(r,-o/2,0)}}]}},Ue=class{constructor(t){this.list=t}place(t,e,i){let r=this.list[0].place(t,e,i);if(!r)return;let n=r[0];const s=n.anchor;let o=n.bboxes[0];const a=o.maxY-o.minY,l=[{draw:n.draw,translate:{x:0,y:0}}],h=[[new q.default(e[0][0].x,e[0][0].y+a)]];for(let e=1;e<this.list.length;e++)r=this.list[e].place(t,h,i),r&&(n=r[0],o=Re(o,n.bboxes[0]),l.push({draw:n.draw,translate:{x:0,y:a}}));return[{anchor:s,bboxes:[o],draw:t=>{for(const e of l)t.save(),t.translate(e.translate.x,e.translate.y),e.draw(t),t.restore()}}]}},Re=(t,e)=>({minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}),Oe=class{constructor(t){this.list=t}place(t,e,i){const r=this.list[0];if(!r)return;let n=r.place(t,e,i);if(!n)return;let s=n[0];const o=s.anchor;let a=s.bboxes[0];const l=[s.draw];for(let r=1;r<this.list.length;r++){if(n=this.list[r].place(t,e,i),!n)return;s=n[0],a=Re(a,s.bboxes[0]),l.push(s.draw)}return[{anchor:o,bboxes:[a],draw:t=>{for(const e of l)e(t)}}]}},qe=class{constructor(t){this.symbolizer=t}place(t,e,i){const r=e[0][0],n=this.symbolizer.place(t,[[new q.default(0,0)]],i);if(!n||0===n.length)return;const s=n[0],o=s.bboxes[0],a=o.maxX-o.minX,l=o.maxY-o.minY;return[{anchor:r,bboxes:[{minX:r.x-a/2,maxX:r.x+a/2,minY:r.y-l/2,maxY:r.y+l/2}],draw:t=>{t.translate(-a/2,l/2-o.maxY),s.draw(t,{justify:2})}}]}},We=class{constructor(t,e){this.padding=new K(t,0),this.symbolizer=e}place(t,e,i){const r=this.symbolizer.place(t,e,i);if(!r||0===r.length)return;const n=this.padding.get(t.zoom,i);for(const t of r)for(const e of t.bboxes)e.minX-=n,e.minY-=n,e.maxX+=n,e.maxY+=n;return r}},Ne=class{constructor(t){this.font=new J(t),this.text=new H(t),this.fill=new Z(t.fill,"black"),this.stroke=new Z(t.stroke,"black"),this.width=new K(t.width,0),this.lineHeight=new K(t.lineHeight,1),this.letterSpacing=new K(t.letterSpacing,0),this.maxLineCodeUnits=new K(t.maxLineChars,15),this.justify=t.justify}place(t,e,i){const r=this.text.get(t.zoom,i);if(!r)return;const n=this.font.get(t.zoom,i);t.scratch.font=n;const s=this.letterSpacing.get(t.zoom,i),o=it(r,this.maxLineCodeUnits.get(t.zoom,i));let a="",l=0;for(const t of o)t.length>l&&(l=t.length,a=t);const h=t.scratch.measureText(a),c=h.width+s*(l-1),f=h.actualBoundingBoxAscent,u=h.actualBoundingBoxDescent,d=(f+u)*this.lineHeight.get(t.zoom,i),p=new q.default(e[0][0].x,e[0][0].y);return[{anchor:p,bboxes:[{minX:p.x,minY:p.y-f,maxX:p.x+c,maxY:p.y+u+(o.length-1)*d}],draw:(e,r)=>{e.globalAlpha=1,e.font=n,e.fillStyle=this.fill.get(t.zoom,i);const a=this.width.get(t.zoom,i);let l=0;for(const n of o){let o=0;if(2===this.justify||r&&2===r.justify?o=(c-e.measureText(n).width)/2:(3===this.justify||r&&3===r.justify)&&(o=c-e.measureText(n).width),a)if(e.lineWidth=2*a,e.strokeStyle=this.stroke.get(t.zoom,i),s>0){let t=o;for(const i of n)e.strokeText(i,t,l),t+=e.measureText(i).width+s}else e.strokeText(n,o,l);if(s>0){let t=o;for(const i of n)e.fillText(i,t,l),t+=e.measureText(i).width+s}else e.fillText(n,o,l);l+=d}}}]}},Ze=class{constructor(t){this.centered=new qe(new Ne(t))}place(t,e,i){return this.centered.place(t,e,i)}},Ke=class{constructor(t,e){var i,r,n;this.symbolizer=t,this.offsetX=new K(e.offsetX,0),this.offsetY=new K(e.offsetY,0),this.justify=null!=(i=e.justify)?i:void 0,this.placements=null!=(r=e.placements)?r:[2,6,8,4,1,3,5,7],this.ddValues=null!=(n=e.ddValues)?n:()=>({})}place(t,e,i){if(1!==i.geomType)return;const r=e[0][0],n=this.symbolizer.place(t,[[new q.default(0,0)]],i);if(!n||0===n.length)return;const s=n[0],o=s.bboxes[0];let a=this.offsetX,l=this.offsetY,h=this.justify,c=this.placements;const{offsetX:f,offsetY:u,justify:d,placements:p}=this.ddValues(t.zoom,i)||{};f&&(a=new K(f,0)),u&&(l=new K(u,0)),d&&(h=d),p&&(c=p);const m=a.get(t.zoom,i),y=l.get(t.zoom,i);let g,x=new q.default(m,y);const w=t=>{t.translate(x.x,x.y),s.draw(t,{justify:g})},b=(e,i)=>{const n=((t,e)=>({minX:t.x+e.x+o.minX,minY:t.y+e.y+o.minY,maxX:t.x+e.x+o.maxX,maxY:t.y+e.y+o.maxY}))(e,i);if(!t.index.bboxCollides(n,t.order))return[{anchor:r,bboxes:[n],draw:w}]};for(const t of c){const e=this.computeXAxisOffset(m,o,t),i=this.computeYAxisOffset(y,o,t);return g=this.computeJustify(h,t),x=new q.default(e,i),b(r,x)}}computeXAxisOffset(t,e,i){const r=e.maxX,n=r/2;return[1,5].includes(i)?t-n:[8,7,6].includes(i)?t-r:t}computeYAxisOffset(t,e,i){const r=Math.abs(e.minY),n=e.maxY,s=(e.minY+e.maxY)/2;return[3,7].includes(i)?t-s:[8,2,1].includes(i)?t-n:[6,4,5].includes(i)?t+r:t}computeJustify(t,e){return t||([1,5].includes(e)?2:[2,3,4].includes(e)?1:3)}},He=class{constructor(t){this.symbolizer=new Ke(new Ne(t),t)}place(t,e,i){return this.symbolizer.place(t,e,i)}},Je=(t=>(t[t.Above=1]="Above",t[t.Center=2]="Center",t[t.Below=3]="Below",t))(Je||{}),Ge=class{constructor(t){var e;this.font=new J(t),this.text=new H(t),this.fill=new Z(t.fill,"black"),this.stroke=new Z(t.stroke,"black"),this.width=new K(t.width,0),this.offset=new K(t.offset,0),this.position=null!=(e=t.position)?e:1,this.maxLabelCodeUnits=new K(t.maxLabelChars,40),this.repeatDistance=new K(t.repeatDistance,250)}place(t,e,i){const r=this.text.get(t.zoom,i);if(!r)return;if(r.length>this.maxLabelCodeUnits.get(t.zoom,i))return;const n=i.bbox;if(n.maxY-n.minY<20&&n.maxX-n.minX<20)return;const s=this.font.get(t.zoom,i);t.scratch.font=s;const o=t.scratch.measureText(r),a=o.width,l=o.actualBoundingBoxAscent+o.actualBoundingBoxDescent;let h=this.repeatDistance.get(t.zoom,i);t.overzoom>4&&(h*=1<<t.overzoom-4);const c=2*l,f=function(t,e,i,r){const n=[];for(const s of t){const t=tt(s,Math.PI/45,e);for(const o of t)if(o.length>=e+r){const t=new Q.default(s[o.beginIndex].x,s[o.beginIndex].y),a=s[o.endIndex-1],l=new Q.default((a.x-t.x)/o.length,(a.y-t.y)/o.length);for(let s=r;s<o.length-e;s+=i)n.push({start:t.add(l.mult(s)),end:t.add(l.mult(s+e))})}}return n}(e,a,h,c);if(0===f.length)return;const u=[];for(const e of f){const n=e.end.x-e.start.x,o=e.end.y-e.start.y,f=et(e.start,e.end,a,c/2).map((t=>({minX:t.x-c/2,minY:t.y-c/2,maxX:t.x+c/2,maxY:t.y+c/2}))),d=e=>{e.globalAlpha=1,e.rotate(Math.atan2(o,n)),n<0&&(e.scale(-1,-1),e.translate(-a,0));let h=0;3===this.position?h+=l:2===this.position&&(h+=l/2),e.translate(0,h-this.offset.get(t.zoom,i)),e.font=s;const c=this.width.get(t.zoom,i);c&&(e.lineWidth=c,e.strokeStyle=this.stroke.get(t.zoom,i),e.strokeText(r,0,0)),e.fillStyle=this.fill.get(t.zoom,i),e.fillText(r,0,0)};u.push({anchor:e.start,bboxes:f,draw:d,deduplicationKey:r,deduplicationDistance:h})}return u}},Qe=class{constructor(t){this.symbolizer=new Ne(t)}place(t,e,i){const r=i.bbox;if((r.maxY-r.minY)*(r.maxX-r.minX)<2e4)return;const n=this.symbolizer.place(t,[[new q.default(0,0)]],i);if(!n||0===n.length)return;const s=n[0],o=s.bboxes[0],a=e[0],l=(0,N.default)([a.map((t=>[t.x,t.y]))]),h=new q.default(l[0],l[1]);return[{anchor:h,bboxes:[{minX:h.x-(o.maxX-o.minX)/2,minY:h.y-(o.maxY-o.minY)/2,maxX:h.x+(o.maxX-o.minX)/2,maxY:h.y+(o.maxY-o.minY)/2}],draw:t=>{t.translate(s.anchor.x-(o.maxX-o.minX)/2,s.anchor.y),s.draw(t)}}]}},ti=(t,e)=>{const i=R(e),r=((t,e)=>{for(var i in e||(e={}))h.call(e,i)&&u(t,i,e[i]);if(a)for(var i of a(e))c.call(e,i)&&u(t,i,e[i]);return t})({},t);for(const[e,n]of Object.entries(t)){const t=R(n);r[e]=O(i[0],i[1],t[2],t[3])}return r},ei=(t,e)=>{let i=t;return e&&(i=ti(t,e)),[{dataLayer:"earth",symbolizer:new Se({fill:i.earth})},{dataLayer:"natural",symbolizer:new Se({fill:i.glacier}),filter:(t,e)=>"glacier"===e.props.natural},{dataLayer:"landuse",symbolizer:new Se({fill:i.residential}),filter:(t,e)=>"residential"===e.props.landuse||"neighbourhood"===e.props.place},{dataLayer:"landuse",symbolizer:new Se({fill:i.hospital}),filter:(t,e)=>"hospital"===e.props.amenity},{dataLayer:"landuse",symbolizer:new Se({fill:i.cemetery}),filter:(t,e)=>"cemetery"===e.props.landuse},{dataLayer:"landuse",symbolizer:new Se({fill:i.school}),filter:(t,e)=>"school"===e.props.amenity||"kindergarten"===e.props.amenity||"university"===e.props.amenity||"college"===e.props.amenity},{dataLayer:"landuse",symbolizer:new Se({fill:i.industrial}),filter:(t,e)=>"industrial"===e.props.landuse},{dataLayer:"natural",symbolizer:new Se({fill:i.wood}),filter:(t,e)=>"wood"===e.props.natural},{dataLayer:"landuse",symbolizer:new Se({fill:i.grass}),filter:(t,e)=>"grass"===e.props.landuse},{dataLayer:"landuse",symbolizer:new Se({fill:i.park}),filter:(t,e)=>"park"===e.props.leisure},{dataLayer:"water",symbolizer:new Se({fill:i.water})},{dataLayer:"natural",symbolizer:new Se({fill:i.sand}),filter:(t,e)=>"sand"===e.props.natural},{dataLayer:"buildings",symbolizer:new Se({fill:i.buildings})},{dataLayer:"roads",symbolizer:new Ee({color:i.highwayCasing,width:Ye(1.4,[[5,1.5],[11,4],[16,9],[20,40]])}),filter:(t,e)=>"highway"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.majorRoadCasing,width:Ye(1.4,[[9,3],[12,4],[17,8],[20,22]])}),filter:(t,e)=>"major_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.mediumRoadCasing,width:Ye(1.4,[[13,3],[17,6],[20,18]])}),filter:(t,e)=>"medium_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.minorRoadCasing,width:Ye(1.4,[[14,2],[17,5],[20,15]])}),filter:(t,e)=>"minor_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.minorRoad,width:Ye(1.4,[[14,1],[17,3],[20,13]])}),filter:(t,e)=>"minor_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.mediumRoad,width:Ye(1.4,[[13,2],[17,4],[20,15]])}),filter:(t,e)=>"medium_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.majorRoad,width:Ye(1.4,[[9,2],[12,3],[17,6],[20,20]])}),filter:(t,e)=>"major_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:i.highway,width:Ye(1.4,[[5,.5],[11,2.5],[16,7],[20,30]])}),filter:(t,e)=>"highway"===e.props["pmap:kind"]},{dataLayer:"boundaries",symbolizer:new Ee({color:i.boundaries,width:2,opacity:.4})},{dataLayer:"mask",symbolizer:new Se({fill:i.mask})}]},ii=(t,e,i,r)=>{let n=t;e&&(n=ti(t,e));let s=["name"];i&&(s=i);const o=(t,e)=>r?new Ue(t instanceof He?[t,new He({fill:e,label_props:r})]:[t,new Ze({fill:e,label_props:r})]):t;return[{dataLayer:"places",symbolizer:o(new Ze({label_props:s,fill:n.countryLabel,lineHeight:1.5,font:(t,e)=>t<6?"200 14px sans-serif":"200 20px sans-serif",textTransform:"uppercase"}),n.countryLabel),filter:(t,e)=>"country"===e.props["pmap:kind"]},{dataLayer:"places",symbolizer:o(new Ze({label_props:s,fill:n.stateLabel,font:"300 16px sans-serif"}),n.stateLabel),filter:(t,e)=>"state"===e.props["pmap:kind"]},{id:"cities_high",dataLayer:"places",filter:(t,e)=>"city"===e.props["pmap:kind"],minzoom:7,symbolizer:o(new Ze({label_props:s,fill:n.cityLabel,font:(t,e)=>1===(null==e?void 0:e.props["pmap:rank"])?t>8?"600 20px sans-serif":"600 12px sans-serif":t>8?"600 16px sans-serif":"600 10px sans-serif"}),n.cityLabel),sort:(t,e)=>t["pmap:rank"]-e["pmap:rank"]},{id:"cities_low",dataLayer:"places",filter:(t,e)=>"city"===e.props["pmap:kind"],maxzoom:6,symbolizer:new Oe([new Ie({radius:2,fill:n.cityLabel}),o(new He({label_props:s,fill:n.cityLabel,offsetX:2,offsetY:2,font:(t,e)=>1===(null==e?void 0:e.props["pmap:rank"])?t>8?"600 20px sans-serif":"600 12px sans-serif":t>8?"600 16px sans-serif":"600 10px sans-serif"}),n.cityLabel)]),sort:(t,e)=>t["pmap:rank"]-e["pmap:rank"]},{id:"neighbourhood",dataLayer:"places",symbolizer:o(new Ze({label_props:s,fill:n.neighbourhoodLabel,font:"500 10px sans-serif",textTransform:"uppercase"}),n.neighbourhoodLabel),filter:(t,e)=>"neighbourhood"===e.props["pmap:kind"]},{dataLayer:"landuse",symbolizer:o(new Qe({label_props:s,fill:n.landuseLabel,font:"300 12px sans-serif"}),n.landuseLabel)},{dataLayer:"water",symbolizer:o(new Qe({label_props:s,fill:n.waterLabel,font:"italic 600 12px sans-serif"}),n.waterLabel)},{dataLayer:"natural",symbolizer:o(new Qe({label_props:s,fill:n.naturalLabel,font:"italic 300 12px sans-serif"}),n.naturalLabel)},{dataLayer:"roads",symbolizer:o(new Ge({label_props:s,fill:n.roadsLabel,font:"500 12px sans-serif"}),n.roadsLabel),minzoom:12},{dataLayer:"roads",symbolizer:new Ae({label_props:["ref"],font:"600 9px sans-serif",background:n.highway,padding:2,fill:n.neighbourhoodLabel}),filter:(t,e)=>"highway"===e.props["pmap:kind"]},{dataLayer:"pois",symbolizer:new Oe([new Ie({radius:2,fill:n.poisLabel}),o(new He({label_props:s,fill:n.poisLabel,offsetX:2,offsetY:2,font:"300 10px sans-serif"}),n.poisLabel)])}]},ri=p(y()),ni=p(F()),si=p(y()),oi=(t,e,i)=>{const r=[];for(const n of t){const t=[];for(const r of n)t.push(r.clone().mult(e).add(i));r.push(t)}return r},ai=(t,e)=>{const i=1<<e;return t<0?i+t:t>=i?t%i:t},li=class{constructor(t,e,i){this.tileCache=t,this.maxDataLevel=e,this.levelDiff=i}dataTilesForBounds(t,e){const i=f(2,t)/f(2,Math.ceil(t)),r=[];let n=1;const s=this.tileCache.tileSize;if(t<this.levelDiff)n=1/(1<<this.levelDiff-t)*i,r.push({data_tile:{z:0,x:0,y:0},origin:new si.default(0,0),scale:n,dim:s*n});else if(t<=this.levelDiff+this.maxDataLevel){const n=1<<this.levelDiff,o=256*i,a=Math.ceil(t)-this.levelDiff,l=Math.floor(e.minX/n/o),h=Math.floor(e.minY/n/o),c=Math.floor(e.maxX/n/o),f=Math.floor(e.maxY/n/o);for(let t=l;t<=c;t++)for(let e=h;e<=f;e++){const l=new si.default(t*n*o,e*n*o);r.push({data_tile:{z:a,x:ai(t,a),y:ai(e,a)},origin:l,scale:i,dim:s*i})}}else{const o=1<<this.levelDiff;n=(1<<Math.ceil(t)-this.maxDataLevel-this.levelDiff)*i;const a=Math.floor(e.minX/o/256/n),l=Math.floor(e.minY/o/256/n),h=Math.floor(e.maxX/o/256/n),c=Math.floor(e.maxY/o/256/n);for(let t=a;t<=h;t++)for(let e=l;e<=c;e++){const i=new si.default(t*o*256*n,e*o*256*n);r.push({data_tile:{z:this.maxDataLevel,x:ai(t,this.maxDataLevel),y:ai(e,this.maxDataLevel)},origin:i,scale:n,dim:s*n})}}return r}dataTileForDisplayTile(t){let e,i,r=1,n=this.tileCache.tileSize;if(t.z<this.levelDiff)e={z:0,x:0,y:0},r=1/(1<<this.levelDiff-t.z),i=new si.default(0,0),n*=r;else if(t.z<=this.levelDiff+this.maxDataLevel){const r=1<<this.levelDiff;e={z:t.z-this.levelDiff,x:Math.floor(t.x/r),y:Math.floor(t.y/r)},i=new si.default(e.x*r*256,e.y*r*256)}else{r=1<<t.z-this.maxDataLevel-this.levelDiff;const s=1<<this.levelDiff;e={z:this.maxDataLevel,x:Math.floor(t.x/s/r),y:Math.floor(t.y/s/r)},i=new si.default(e.x*s*r*256,e.y*s*r*256),n*=r}return{data_tile:e,scale:r,origin:i,dim:n}}getBbox(t,e){return m(this,null,(function*(){const i=this.dataTilesForBounds(t,e);return(yield Promise.all(i.map((t=>this.tileCache.get(t.data_tile))))).map(((e,r)=>{const n=i[r];return{data:e,z:t,data_tile:n.data_tile,scale:n.scale,dim:n.dim,origin:n.origin}}))}))}getDisplayTile(t){return m(this,null,(function*(){const e=this.dataTileForDisplayTile(t);return{data:yield this.tileCache.get(e.data_tile),z:t.z,data_tile:e.data_tile,scale:e.scale,origin:e.origin,dim:e.dim}}))}queryFeatures(t,e,i){const r=Math.round(i),n=Math.min(r-this.levelDiff,this.maxDataLevel),s=16/(1<<r-n);return this.tileCache.queryFeatures(t,e,n,s)}},hi=t=>{const e=t=>{const e=void 0===t.levelDiff?2:t.levelDiff,i=t.maxDataZoom||14;let r;r="string"==typeof t.url?t.url.endsWith(".pmtiles")?new ue(t.url,!0):new de(t.url,!0):new ue(t.url,!0);const n=new Me(r,256<<e);return new li(n,i,e)},i=new Map;if(t.sources)for(const r in t.sources)i.set(r,e(t.sources[r]));else i.set("",e(t));return i},ci=(t,e,i)=>{const r=256,n=e/r,s=Math.floor(i.minX/r),o=Math.floor(i.minY/r),a=Math.floor(i.maxX/r),l=Math.floor(i.maxY/r),h=Math.log2(n),c=[];for(let e=s;e<=a;e++){const i=e%(1<<t);for(let e=o;e<=l;e++)c.push({display:he({z:t,x:i,y:e}),key:he({z:t-h,x:Math.floor(i/n),y:Math.floor(e/n)})})}return c},fi=class{constructor(t,e){this.tree=new ni.default,this.current=new Map,this.dim=t,this.maxLabeledTiles=e}hasPrefix(t){for(const e of this.current.keys())if(e.startsWith(t))return!0;return!1}has(t){return this.current.has(t)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(t,e){const i=new Set;for(const r of this.tree.search(t))r.indexedLabel.order<=e&&i.add(r.indexedLabel);return i}searchLabel(t,e){const i=new Set;for(const r of t.bboxes)for(const t of this.tree.search(r))t.indexedLabel.order<=e&&i.add(t.indexedLabel);return i}bboxCollides(t,e){for(const i of this.tree.search(t))if(i.indexedLabel.order<=e)return!0;return!1}labelCollides(t,e){for(const i of t.bboxes)for(const t of this.tree.search(i))if(t.indexedLabel.order<=e)return!0;return!1}deduplicationCollides(t){if(!t.deduplicationKey||!t.deduplicationDistance)return!1;const e=t.deduplicationDistance,i={minX:t.anchor.x-e,minY:t.anchor.y-e,maxX:t.anchor.x+e,maxY:t.anchor.y+e};for(const r of this.tree.search(i))if(r.indexedLabel.deduplicationKey===t.deduplicationKey&&r.indexedLabel.anchor.dist(t.anchor)<e)return!0;return!1}makeEntry(t){this.current.get(t)&&console.log("consistency error 1");const e=new Set;this.current.set(t,e)}insert(t,e,i){const r={anchor:t.anchor,bboxes:t.bboxes,draw:t.draw,order:e,tileKey:i,deduplicationKey:t.deduplicationKey,deduplicationDistance:t.deduplicationDistance};let n=this.current.get(i);if(!n){const t=new Set;this.current.set(i,t),n=t}n.add(r);let s=!1,o=!1;for(const e of t.bboxes)this.tree.insert({minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY,indexedLabel:r}),e.minX<0&&(s=!0),e.maxX>this.dim&&(o=!0);if(s||o){const r=s?this.dim:-this.dim,n=[];for(const e of t.bboxes)n.push({minX:e.minX+r,minY:e.minY,maxX:e.maxX+r,maxY:e.maxY});const o={anchor:new ri.default(t.anchor.x+r,t.anchor.y),bboxes:n,draw:t.draw,order:e,tileKey:i},a=this.current.get(i);a&&a.add(o);for(const t of n)this.tree.insert({minX:t.minX,minY:t.minY,maxX:t.maxX,maxY:t.maxY,indexedLabel:o})}}pruneOrNoop(t){const e=t.split(":");let i,r=0,n=0;for(const t of this.current.keys()){const s=t.split(":");if(s[3]===e[3]){n++;const o=Math.sqrt(f(+s[0]-+e[0],2)+f(+s[1]-+e[1],2));o>r&&(r=o,i=t)}i&&n>this.maxLabeledTiles&&this.pruneKey(i)}}pruneKey(t){const e=this.current.get(t);if(!e)return;const i=[];for(const t of this.tree.all())e.has(t.indexedLabel)&&i.push(t);for(const t of i)this.tree.remove(t);this.current.delete(t)}removeLabel(t){const e=[];for(const i of this.tree.all())t===i.indexedLabel&&e.push(i);for(const t of e)this.tree.remove(t);const i=this.current.get(t.tileKey);i&&i.delete(t)}},ui=class{constructor(t,e,i,r,n){this.index=new fi(256<<t,r),this.z=t,this.scratch=e,this.labelRules=i,this.callback=n}layout(t){const e=performance.now(),i=new Set;for(const[e,r]of t)for(const t of r){const r=`${he(t.data_tile)}:${e}`;this.index.has(r)||(this.index.makeEntry(r),i.add(r))}const r=new Set;for(const[e,n]of this.labelRules.entries()){if(!1===n.visible)continue;if(n.minzoom&&this.z<n.minzoom)continue;if(n.maxzoom&&this.z>n.maxzoom)continue;const s=n.dataSource||"",o=t.get(s);if(o)for(const t of o){const o=`${he(t.data_tile)}:${s}`;if(!i.has(o))continue;const a=t.data.get(n.dataLayer);if(void 0===a)continue;const l=a;n.sort&&l.sort(((t,e)=>n.sort?n.sort(t.props,e.props):0));const h={index:this.index,zoom:this.z,scratch:this.scratch,order:e,overzoom:this.z-t.data_tile.z};for(const i of l){if(n.filter&&!n.filter(this.z,i))continue;const s=oi(i.geom,t.scale,t.origin),a=n.symbolizer.place(h,s,i);if(a)for(const i of a){let n=!1;if(!i.deduplicationKey||!this.index.deduplicationCollides(i)){if(this.index.labelCollides(i,1/0)){if(!this.index.labelCollides(i,e)){const s=this.index.searchLabel(i,1/0);for(const e of s){this.index.removeLabel(e);for(const i of e.bboxes)this.findInvalidatedTiles(r,t.dim,i,o)}this.index.insert(i,e,o),n=!0}}else this.index.insert(i,e,o),n=!0;if(n)for(const e of i.bboxes)(e.maxX>t.origin.x+t.dim||e.minX<t.origin.x||e.minY<t.origin.y||e.maxY>t.origin.y+t.dim)&&this.findInvalidatedTiles(r,t.dim,e,o)}}}}}for(const t of i)this.index.pruneOrNoop(t);return r.size>0&&this.callback&&this.callback(r),performance.now()-e}findInvalidatedTiles(t,e,i,r){const n=ci(this.z,e,i);for(const e of n)e.key!==r&&this.index.hasPrefix(e.key)&&t.add(e.display)}add(t){let e=!0;for(const[i,r]of t)for(const t of r)this.index.has(`${he(t.data_tile)}:${i}`)||(e=!1);return e?0:this.layout(t)}},di=class{constructor(t,e,i,r){this.labelers=new Map,this.scratch=t,this.labelRules=e,this.maxLabeledTiles=i,this.callback=r}add(t,e){let i=this.labelers.get(t);return i||(i=new ui(t,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(t,i)),i.add(e)}getIndex(t){const e=this.labelers.get(t);if(e)return e.index}},pi=p(y());function mi(t,e,i,r,n,s,o,a,l){const h=performance.now();t.save(),t.miterLimit=2;for(const r of n){if(r.minzoom&&e<r.minzoom)continue;if(r.maxzoom&&e>r.maxzoom)continue;const n=i.get(r.dataSource||"");if(n)for(const e of n){const i=e.data.get(r.dataLayer);if(void 0===i)continue;r.symbolizer.before&&r.symbolizer.before(t,e.z);const n=e.origin,l=e.dim,h=e.scale;if(t.save(),a){t.beginPath();const e=Math.max(n.x-o.x,s.minX-o.x),i=Math.max(n.y-o.y,s.minY-o.y),r=Math.min(n.x-o.x+l,s.maxX-o.x),a=Math.min(n.y-o.y+l,s.maxY-o.y);t.rect(e,i,r-e,a-i),t.clip()}t.translate(n.x-o.x,n.y-o.y);for(const o of i){let i=o.geom;const a=o.bbox;a.maxX*h+n.x<s.minX||a.minX*h+n.x>s.maxX||a.minY*h+n.y>s.maxY||a.maxY*h+n.y<s.minY||r.filter&&!r.filter(e.z,o)||(1!==h&&(i=oi(i,h,new pi.default(0,0))),r.symbolizer.draw(t,i,e.z,o))}t.restore()}}if(a&&(t.beginPath(),t.rect(s.minX-o.x,s.minY-o.y,s.maxX-s.minX,s.maxY-s.minY),t.clip()),r){const e=r.searchBbox(s,1/0);for(const i of e)if(t.save(),t.translate(i.anchor.x-o.x,i.anchor.y-o.y),i.draw(t),t.restore(),l){t.lineWidth=.5,t.strokeStyle=l,t.fillStyle=l,t.globalAlpha=1,t.fillRect(i.anchor.x-o.x-2,i.anchor.y-o.y-2,4,4);for(const e of i.bboxes)t.strokeRect(e.minX-o.x,e.minY-o.y,e.maxX-e.minX,e.maxY-e.minY)}}return t.restore(),performance.now()-h}var yi=(t,e,i)=>[{dataSource:t,dataLayer:e,symbolizer:new Ie({opacity:.2,fill:i,radius:4}),filter:(t,e)=>1===e.geomType},{dataSource:t,dataLayer:e,symbolizer:new Ee({opacity:.2,color:i,width:2}),filter:(t,e)=>2===e.geomType},{dataSource:t,dataLayer:e,symbolizer:new Se({opacity:.2,fill:i,stroke:i,width:1}),filter:(t,e)=>3===e.geomType}],gi=(t,e)=>{let i=[];for(const[r,n]of t)for(const t of n)for(const n of t.data.keys())r===e.dataSource&&n===e.dataLayer||(i=i.concat(yi(r,n,"steelblue")));return i=i.concat(yi(e.dataSource||"",e.dataLayer,"red")),i},xi=6378137,wi=xi*Math.PI,bi=t=>{const e=Math.PI/180,i=Math.max(Math.min(85.0511287798,t.y),-85.0511287798),r=Math.sin(i*e);return new C.default(xi*t.x*e,xi*Math.log((1+r)/(1-r))/2)},vi=(t,e)=>i=>{const r=bi(i);return new C.default((r.x+wi)/(2*wi),1-(r.y+wi)/(2*wi)).mult(256*(1<<e)).sub(t)},_i=(t,e)=>i=>{const r=new C.default(i.x,i.y).add(t).div(256*(1<<e));return(t=>{const e=180/Math.PI;return{lat:(2*Math.atan(Math.exp(t.y/xi))-Math.PI/2)*e,lng:t.x*e/xi}})(new C.default(r.x*(2*wi)-wi,(1-r.y)*(2*wi)-wi))},zi=(t,e)=>{const i=e*(360/t);return Math.log2(i/256)},ki=class{constructor(t){const e=t.dark?S:T;this.paint_rules=t.paint_rules||ei(e,t.shade),this.label_rules=t.label_rules||ii(e,t.shade,t.language1,t.language2),this.backgroundColor=t.backgroundColor,this.views=hi(t),this.debug=t.debug||"",this.xray=t.xray}drawContext(t,e,i,r,n){return m(this,null,(function*(){const s=bi(r),o=new C.default((s.x+wi)/(2*wi),1-(s.y+wi)/(2*wi)).clone().mult(256*f(2,n)).sub(new C.default(e/2,i/2)),a={minX:o.x,minY:o.y,maxX:o.x+e,maxY:o.y+i},l=[];for(const[t,e]of this.views){const i=e.getBbox(n,a);l.push({key:t,promise:i})}const h=yield Promise.all(l.map((t=>t.promise.then((e=>({status:"fulfilled",value:e,key:t.key})),(e=>({status:"rejected",value:[],reason:e,key:t.key})))))),c=new Map;for(const t of h)"fulfilled"===t.status&&c.set(t.key,t.value);const u=performance.now(),d=new ui(n,t,this.label_rules,16,void 0);d.add(c),this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,e,i),t.restore());let p=this.paint_rules;if(this.xray&&(p=gi(c,this.xray)),mi(t,n,c,this.xray?null:d.index,p,a,o,!0,this.debug),this.debug){t.save(),t.translate(-o.x,-o.y),t.strokeStyle=this.debug,t.fillStyle=this.debug,t.font="12px sans-serif";let e=0;for(const[i,r]of c){for(const n of r){t.strokeRect(n.origin.x,n.origin.y,n.dim,n.dim);const r=n.data_tile;t.fillText(`${i+(i?" ":"")+r.z} ${r.x} ${r.y}`,n.origin.x+4,n.origin.y+14*(1+e))}e++}t.restore()}return{elapsed:performance.now()-u,project:vi(o,n),unproject:_i(o,n)}}))}drawCanvas(t,e,i){return m(this,arguments,(function*(t,e,i,r={}){const n=window.devicePixelRatio,s=t.clientWidth,o=t.clientHeight;t.width===s*n&&t.height===o*n||(t.width=s*n,t.height=o*n),r.lang&&(t.lang=r.lang);const a=t.getContext("2d");return a.setTransform(n,0,0,n,0,0),this.drawContext(a,s,o,e,i)}))}drawContextBounds(t,e,i,r,n){return m(this,null,(function*(){const s=i.x-e.x,o=new C.default((e.x+i.x)/2,(e.y+i.y)/2);return this.drawContext(t,r,n,o,zi(s,r))}))}drawCanvasBounds(t,e,i,r){return m(this,arguments,(function*(t,e,i,r,n={}){const s=i.x-e.x,o=new C.default((e.x+i.x)/2,(e.y+i.y)/2);return this.drawCanvas(t,o,zi(s,r),n)}))}},Mi=p(y()),Li=t=>t.then((t=>({status:"fulfilled",value:t})),(t=>({status:"rejected",reason:t}))),Fi=(t={})=>{class e extends L.GridLayer{constructor(t={}){t.noWrap&&!t.bounds&&(t.bounds=[[-90,-180],[90,180]]),null==t.attribution&&(t.attribution='<a href="https://protomaps.com">Protomaps</a> © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(t);const e=t.dark?S:T;this.paint_rules=t.paint_rules||ei(e,t.shade),this.label_rules=t.label_rules||ii(e,t.shade,t.language1,t.language2),this.backgroundColor=t.backgroundColor,this.lastRequestedZ=void 0,this.xray=t.xray,this.tasks=t.tasks||[],this.views=hi(t),this.debug=t.debug;const i=document.createElement("canvas").getContext("2d");this.scratch=i,this.onTilesInvalidated=t=>{for(const e of t)this.rerenderTile(e)},this.labelers=new di(this.scratch,this.label_rules,16,this.onTilesInvalidated),this.tile_size=256*window.devicePixelRatio,this.tileDelay=t.tileDelay||3,this.lang=t.lang,this.inspector=this.inspect(this)}setDefaultStyle(t,e,i,r){const n=t?S:T;this.paint_rules=ei(n,e),this.label_rules=ii(n,e,i,r)}renderTile(t,e,i,r=(()=>{})){return m(this,null,(function*(){this.lastRequestedZ=t.z;const n=[];for(const[e,i]of this.views){const r=i.getDisplayTile(t);n.push({key:e,promise:r})}const s=yield Promise.all(n.map((t=>t.promise.then((e=>({status:"fulfilled",value:e,key:t.key})),(e=>({status:"rejected",reason:e,key:t.key})))))),o=new Map;for(const t of s)"fulfilled"===t.status?o.set(t.key,[t.value]):"AbortError"===t.reason.name||console.error(t.reason);if(e.key!==i)return;if(this.lastRequestedZ!==t.z)return;if(yield Promise.all(this.tasks.map(Li)),e.key!==i)return;if(this.lastRequestedZ!==t.z)return;const a=this.labelers.add(t.z,o);if(e.key!==i)return;if(this.lastRequestedZ!==t.z)return;const l=this.labelers.getIndex(t.z);if(!this._map)return;const h=this._map.getCenter().wrap(),c=this._getTiledPixelBounds(h),f=this._pxBoundsToTileRange(c).getCenter(),u=t.distanceTo(f)*this.tileDelay;var d;if(yield(d=u,new Promise(((t,e)=>{setTimeout((()=>{t()}),d)}))),e.key!==i)return;if(this.lastRequestedZ!==t.z)return;const p={minX:256*t.x-16,minY:256*t.y-16,maxX:256*(t.x+1)+16,maxY:256*(t.y+1)+16},m=new Mi.default(256*t.x,256*t.y);e.width=this.tile_size,e.height=this.tile_size;const y=e.getContext("2d");y.setTransform(this.tile_size/256,0,0,this.tile_size/256,0,0),y.clearRect(0,0,256,256),this.backgroundColor&&(y.save(),y.fillStyle=this.backgroundColor,y.fillRect(0,0,256,256),y.restore());let g=0,x=this.paint_rules;if(this.xray&&(x=gi(o,this.xray)),g=mi(y,t.z,o,this.xray?null:l,x,p,m,!1,this.debug),this.debug){y.save(),y.fillStyle=this.debug,y.font="600 12px sans-serif",y.fillText(`${t.z} ${t.x} ${t.y}`,4,14),y.font="12px sans-serif";let e=28;for(const[t,i]of o){const r=i[0].data_tile;y.fillText(`${t+(t?" ":"")+r.z} ${r.x} ${r.y}`,4,e),e+=14}y.font="600 10px sans-serif",g>8&&(y.fillText(`${g.toFixed()} ms paint`,4,e),e+=14),a>8&&y.fillText(`${a.toFixed()} ms layout`,4,e),y.strokeStyle=this.debug,y.lineWidth=.5,y.beginPath(),y.moveTo(0,0),y.lineTo(0,256),y.stroke(),y.lineWidth=.5,y.beginPath(),y.moveTo(0,0),y.lineTo(256,0),y.stroke(),y.restore()}r()}))}rerenderTile(t){for(const e in this._tiles){const i=this._wrapCoords(this._keyToTileCoords(e));t===this._tileCoordsToKey(i)&&this.renderTile(i,this._tiles[e].el,t)}}clearLayout(){this.labelers=new di(this.scratch,this.label_rules,16,this.onTilesInvalidated)}rerenderTiles(){for(const t in this._tiles){const e=this._wrapCoords(this._keyToTileCoords(t)),i=this._tileCoordsToKey(e);this.renderTile(e,this._tiles[t].el,i)}}createTile(t,e){const i=L.DomUtil.create("canvas","leaflet-tile");i.lang=this.lang;const r=this._tileCoordsToKey(t);return i.key=r,this.renderTile(t,i,r,(()=>{e(null,i)})),i}_removeTile(t){const e=this._tiles[t];e&&(e.el.removed=!0,e.el.key=void 0,L.DomUtil.removeClass(e.el,"leaflet-tile-loaded"),e.el.width=e.el.height=0,L.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))}queryFeatures(t,e){const i=new Map;for(const[r,n]of this.views)i.set(r,n.queryFeatures(t,e,this._map.getZoom()));return i}inspect(t){return e=>{const i=["◎","⟍","◻"],r=t._map.wrapLatLng(e.latlng),n=t.queryFeatures(r.lng,r.lat);let s="",o=!0;for(const[t,e]of n)for(const r of e)if(!this.xray||!0===this.xray||(this.xray.dataSource||"")===t&&this.xray.dataLayer===r.layerName){s=`${s}<div style="margin-top:${o?0:.5}em">${i[r.feature.geomType-1]} <b>${t} ${t?"/":""} ${r.layerName}</b> ${r.feature.id||""}</div>`;for(const t in r.feature.props)s=`${s}<div style="font-size:0.9em">${t} = ${r.feature.props[t]}</div>`;o=!1}o&&(s="No features."),L.popup().setLatLng(e.latlng).setContent(`<div style="max-height:400px;overflow-y:scroll;padding-right:8px">${s}</div>`).openOn(t._map)}}addInspector(t){return t.on("click",this.inspector)}removeInspector(t){return t.off("click",this.inspector)}}return new e(t)},Ci=(t,e,i)=>{const r=new FontFace(t,`url(${e})`,{weight:i});return document.fonts.add(r),r.load()},Si=t=>m(void 0,null,(function*(){return new Promise(((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=()=>i("Invalid SVG"),r.src=t}))})),Ti=class{constructor(t){this.src=t,this.canvas=document.createElement("canvas"),this.mapping=new Map,this.missingBox={x:0,y:0,w:0,h:0}}load(){return m(this,null,(function*(){let t=this.src;const e=window.devicePixelRatio;if(t.endsWith(".html")){const e=yield fetch(t);t=yield e.text()}const i=(new window.DOMParser).parseFromString(t,"text/html"),r=Array.from(i.body.children),n=yield Si(`data:image/svg+xml;base64,${btoa('\n<svg width="20px" height="20px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg">\n    <rect width="50" height="50" fill="#cccccc"/>\n    <g transform="translate(5,5)">\n        <path fill="none" stroke="#666666" stroke-width="7" d="m11,12a8.5,8 0 1,1 17,0q0,4-4,6t-4.5,4.5-.4,4v.2m0,3v7"/>\n    </g>\n</svg>\n')}`),s=[{w:n.width*e,h:n.height*e,img:n,id:""}],o=new XMLSerializer;for(const t of r){const i=`data:image/svg+xml;base64,${btoa(o.serializeToString(t))}`,r=yield Si(i);s.push({w:r.width*e,h:r.height*e,img:r,id:t.id})}const a=function(t){let e=0,i=0;for(const r of t)e+=r.w*r.h,i=Math.max(i,r.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let n=0,s=0;for(const e of t)for(let t=r.length-1;t>=0;t--){const i=r[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,s=Math.max(s,e.y+e.h),n=Math.max(n,e.x+e.w),e.w===i.w&&e.h===i.h){const e=r.pop();t<r.length&&(r[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):e.w===i.w?(i.y+=e.h,i.h-=e.h):(r.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:n,h:s,fill:e/(n*s)||0}}(s);this.canvas.width=a.w,this.canvas.height=a.h;const l=this.canvas.getContext("2d");if(l)for(const t of s)void 0!==t.x&&void 0!==t.y&&(l.drawImage(t.img,t.x,t.y,t.w,t.h),t.id?this.mapping.set(t.id,{x:t.x,y:t.y,w:t.w,h:t.h}):this.missingBox={x:t.x,y:t.y,w:t.w,h:t.h});return this}))}get(t){let e=this.mapping.get(t);return e||(e=this.missingBox),e}};function Bi(t,e){return"number"==typeof t?t:e}function Di(t){if(t.includes("$type"))return t=>!0;if("=="===t[0])return(e,i)=>i.props[t[1]]===t[2];if("!="===t[0])return(e,i)=>i.props[t[1]]!==t[2];if("!"===t[0]){const e=Di(t[1]);return(t,i)=>!e(t,i)}if("<"===t[0])return(e,i)=>Bi(i.props[t[1]],1/0)<t[2];if("<="===t[0])return(e,i)=>Bi(i.props[t[1]],1/0)<=t[2];if(">"===t[0])return(e,i)=>Bi(i.props[t[1]],-1/0)>t[2];if(">="===t[0])return(e,i)=>Bi(i.props[t[1]],-1/0)>=t[2];if("in"===t[0])return(e,i)=>t.slice(2,t.length).includes(i.props[t[1]]);if("!in"===t[0])return(e,i)=>!t.slice(2,t.length).includes(i.props[t[1]]);if("has"===t[0])return(e,i)=>i.props.hasOwnProperty(t[1]);if("!has"===t[0])return(e,i)=>!i.props.hasOwnProperty(t[1]);if("all"===t[0]){const e=t.slice(1,t.length).map((t=>Di(t)));return(t,i)=>e.every((e=>e(t,i)))}if("any"===t[0]){const e=t.slice(1,t.length).map((t=>Di(t)));return(t,i)=>e.some((e=>e(t,i)))}return console.log("Unimplemented filter: ",t[0]),t=>!1}function Xi(t){if(t.base&&t.stops)return e=>Ye(t.base,t.stops)(e-1);if("interpolate"===t[0]&&"exponential"===t[1][0]&&"zoom"===t[2][0]){const e=t.slice(3),i=[];for(let t=0;t<e.length;t+=2)i.push([e[t],e[t+1]]);return e=>Ye(t[1][1],i)(e-1)}if("step"===t[0]&&"get"===t[1][0]){const e=t.slice(2),i=t[1][1];return(t,r)=>{const n=null==r?void 0:r.props[i];if("number"==typeof n){if(n<e[1])return e[0];for(let t=1;t<e.length;t+=2)if(n<=e[t])return e[t+1]}return e[e.length-1]}}return console.log("Unimplemented numeric fn: ",t),t=>1}function Yi(t,e=0){return t?"number"==typeof t?t:(i,r)=>r?Xi(t)(i,r):e:e}function Pi(t,e){const i=Yi(t,1),r=Yi(e);return(t,e)=>{const n="number"==typeof i?i:i(t,e);return r?n+("number"==typeof r?r:r(t,e)):n}}function ji(t,e){const i=[];for(const r of t["text-font"])e.hasOwnProperty(r)&&i.push(e[r]);0===i.length&&i.push({face:"sans-serif"});const r=t["text-size"];let n="";i.length&&i[0].weight&&(n=`${i[0].weight} `);let s="";if(i.length&&i[0].style&&(s=`${i[0].style} `),"number"==typeof r)return t=>`${s}${n}${r}px ${i.map((t=>t.face)).join(", ")}`;if(r.stops){let t=1.4;r.base?t=r.base:r.base=t;const e=Xi(r);return(t,r)=>`${s}${n}${e(t,r)}px ${i.map((t=>t.face)).join(", ")}`}if("step"===r[0]){const t=Xi(r);return(e,r)=>`${s}${n}${t(e,r)}px ${i.map((t=>t.face)).join(", ")}`}return console.log("Can't parse font: ",t),t=>"12px sans-serif"}function Vi(t,e){const i=[],r=[],n=new Map;for(const s of t.layers){if(n.set(s.id,s),s.layout&&"none"===s.layout.visibility)continue;if(s.ref){const t=n.get(s.ref);s.type=t.type,s.filter=t.filter,s.source=t.source,s["source-layer"]=t["source-layer"]}let t;s["source-layer"],s.filter&&(t=Di(s.filter)),"fill"===s.type?i.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Se({fill:s.paint["fill-color"],opacity:s.paint["fill-opacity"]})}):"fill-extrusion"===s.type?i.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Se({fill:s.paint["fill-extrusion-color"],opacity:s.paint["fill-extrusion-opacity"]})}):"line"===s.type?s.paint["line-dasharray"]?i.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Ee({width:Pi(s.paint["line-width"],s.paint["line-gap-width"]),dash:s.paint["line-dasharray"],dashColor:s.paint["line-color"]})}):i.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Ee({color:s.paint["line-color"],width:Pi(s.paint["line-width"],s.paint["line-gap-width"])})}):"symbol"===s.type?"line"===s.layout["symbol-placement"]?r.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Ge({font:ji(s.layout,e),fill:s.paint["text-color"],width:s.paint["text-halo-width"],stroke:s.paint["text-halo-color"],textTransform:s.layout["text-transform"],label_props:s.layout["text-field"]?[s.layout["text-field"]]:void 0})}):r.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Ze({font:ji(s.layout,e),fill:s.paint["text-color"],stroke:s.paint["text-halo-color"],width:s.paint["text-halo-width"],textTransform:s.layout["text-transform"],label_props:s.layout["text-field"]?[s.layout["text-field"]]:void 0})}):"circle"===s.type&&i.push({dataLayer:s["source-layer"],filter:t,symbolizer:new Ie({radius:s.paint["circle-radius"],fill:s.paint["circle-color"],stroke:s.paint["circle-stroke-color"],width:s.paint["circle-stroke-width"]})})}return r.reverse(),{paint_rules:i,label_rules:r,tasks:[]}}var Ei=t=>{const e=Ce(4,4,(t=>{const e=t.getContext("2d");e&&(e.beginPath(),e.rect(0,0,1,1),e.rect(2,2,1,1),e.fillStyle="black",e.fill())}));let i="black";"lite"===t&&(i="#d9d9d9");const r=["name:en","name"],n=[{dataLayer:"earth",symbolizer:new Se({fill:"white"})},{dataLayer:"landuse",symbolizer:new Se({pattern:e}),filter:(t,e)=>"park"===e.props.leisure},{dataLayer:"water",symbolizer:new Se({fill:i})},{dataLayer:"roads",symbolizer:new Ee({color:"#dddddd"}),filter:(t,e)=>"minor_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"white",width:Te(16,[7,9,17,20])}),filter:(t,e)=>"medium_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"#cccccc",width:Te(10,[.2,.2,.2,.4,.8,1.5,4,7,13,16])}),filter:(t,e)=>"medium_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"white",width:Te(11,[1.25,5,5,5,8,11,18,22,30])}),filter:(t,e)=>"major_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"black",width:Te(9,[.15,.5,.7,1,1.5,1.9,5,7,12,18,26])}),filter:(t,e)=>"major_road"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"white",width:Te(7,[2.25,3.25,4.25,5,6,7,8,9,11,14,24,42,49])}),filter:(t,e)=>"highway"===e.props["pmap:kind"]},{dataLayer:"roads",symbolizer:new Ee({color:"black",width:Te(6,[.1,1.5,1.5,1.5,2,2.5,3,3,4,6,9,15,28,35])}),filter:(t,e)=>"highway"===e.props["pmap:kind"]},{dataLayer:"transit",symbolizer:new Ee({color:"#888888",dashColor:"#888888",dash:[1,4],dashWidth:3}),filter:(t,e)=>"railway"===e.props["pmap:kind"],minzoom:14},{dataLayer:"transit",symbolizer:new Ee({color:"#888888"}),filter:(t,e)=>"railway"===e.props["pmap:kind"],minzoom:14},{dataLayer:"buildings",symbolizer:new Ee({color:"#888888",width:.5})},{dataLayer:"boundaries",symbolizer:new Ee({color:"black",width:1}),maxzoom:6},{dataLayer:"boundaries",symbolizer:new Ee({color:"white",width:2.5,dash:[3,1],dashWidth:.3,dashColor:"black"}),minzoom:7}],s=[{dataLayer:"places",symbolizer:new Ze({label_props:r,fill:"black",stroke:"white",width:1.5,fontFamily:"Inter",fontWeight:300,fontSize:15,justify:2}),filter:(t,e)=>"country"===e.props["pmap:kind"]},{dataLayer:"places",symbolizer:new Ze({label_props:r,fill:"black",stroke:"white",width:2,fontFamily:"Inter",fontWeight:300,fontSize:12,justify:2}),filter:(t,e)=>"state"===e.props["pmap:kind"]},{dataLayer:"places",symbolizer:new Oe([new Ie({radius:2,fill:"black",stroke:"white",width:2}),new He({label_props:r,offsetX:3,fill:"black",stroke:"white",width:1.5,fontFamily:"Inter",fontWeight:600,fontSize:(t,e)=>1===(null==e?void 0:e.props["pmap:rank"])?15:13})]),sort:(t,e)=>t["pmap:rank"]-e["pmap:rank"],filter:(t,e)=>"city"===e.props["pmap:kind"],maxzoom:8},{dataLayer:"places",symbolizer:new Ze({label_props:r,justify:2,fill:"black",stroke:"white",width:2,fontFamily:"Inter",fontWeight:600,fontSize:(t,e)=>1===(null==e?void 0:e.props["pmap:rank"])?15:13}),sort:(t,e)=>t["pmap:rank"]-e["pmap:rank"],filter:(t,e)=>"city"===e.props["pmap:kind"],minzoom:9},{dataLayer:"water",symbolizer:new Qe({label_props:r,fill:"white",stroke:"black",width:3,font:"italic 400 12px Inter"})},{dataLayer:"landuse",symbolizer:new Qe({fill:"black",stroke:"white",width:2,font:"italic 400 12px Inter"})},{dataLayer:"physical_point",symbolizer:new Ze({label_props:r,fill:"white",stroke:"black",width:3,font:"italic 600 12px Inter",textTransform:"uppercase",justify:2}),filter:(t,e)=>["ocean","sea"].includes(e.props.place)},{dataLayer:"roads",symbolizer:new Ge({fill:"black",stroke:"white",width:2,font:"600 14px Inter",offset:4})}];return{tasks:[Ci("Inter","https://cdn.protomaps.com/fonts/woff2/Inter.var.woff2","100 900")],paint_rules:n,label_rules:s,attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>.'}}}}]);